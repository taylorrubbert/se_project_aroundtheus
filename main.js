!function(){"use strict";const e={formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__save",inactiveButtonClass:"modal__button_disabled",inputErrorClass:"modal__input-error",errorClass:"modal__error"};class t{constructor(e,t,s,r,i){this.name=e.name,this.link=e.link,this._id=e._id,this._isLiked=e.isLiked,this._userId=e._userId,this._cardSelector=t,this._handleImageClick=s,this._handleDeleteClick=r,this._handleLikeClick=i,this._previewImageElement=null}_getTemplate(){return document.querySelector(this._cardSelector).content.querySelector(".card__content").cloneNode(!0)}_setEventListeners(){this._likeButton=this._cardElement.querySelector("#like-button"),this._likeButton.addEventListener("click",(()=>this._handleLikeClick(this._id,this))),this._deleteButton=this._cardElement.querySelector("#delete-button").addEventListener("click",(()=>this._handleDeleteClick(this._id,this))),this._cardImageElement=this._cardElement.querySelector("#card-image"),this._cardImageElement.addEventListener("click",(()=>{this._handleImageClick({name:this.name,link:this.link})}))}handleDeleteCard(){this._cardElement.remove(),this._cardElement=null}getIsLikedState(){return this._isLiked}updateLikes(){this._isLiked?this._likeButton.classList.add("card__like-button_active"):this._likeButton.classList.remove("card__like-button_active")}flipLikeState(){this._isLiked=!this._isLiked}getView(){return this._cardElement=this._getTemplate(),this._likeButton=this._cardElement.querySelector("#like-button"),this._deleteButton=this._cardElement.querySelector("#delete-button"),this._cardImageElement=this._cardElement.querySelector("#card-image"),this._cardTitleElement=this._cardElement.querySelector("#card-title"),this.updateLikes(),this._cardImageElement.src=this.link,this._cardImageElement.alt=this.name,this._cardTitleElement.textContent=this.name,this._setEventListeners(),this._cardElement}}class s{constructor(e,t){this._formElement=t,this._formSelector=e.formSelector,this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass}_showInputError(e){this._errorMessage=this._formElement.querySelector(`#${e.id}-error`),e.classList.add(this._inputErrorClass),this._errorMessage.textContent=e.validationMessage,this._errorMessage.classList.add(this._errorClass)}_hideInputError(e){this._errorMessage=this._formElement.querySelector(`#${e.id}-error`),e.classList.remove(this._inputErrorClass),this._errorMessage.textContent="",this._errorMessage.classList.add(this._errorClass)}_checkInputValidity(e){if(!e.validity.valid)return this._showInputError(e);this._hideInputError(e)}_hasInvalidInput(){return!this._inputElements.every((e=>e.validity.valid))}toggleButtonState(){this._hasInvalidInput()?this._disableSubmitButton():this._enableSubmitButton()}_enableSubmitButton(){this._submitButton.classList.remove(this._inactiveButtonClass),this._submitButton.disabled=!1}_disableSubmitButton(){this._submitButton.classList.add(this._inactiveButtonClass),this._submitButton.disabled=!0}_setEventListeners(){this._inputElements=[...this._formElement.querySelectorAll(this._inputSelector)],this._submitButton=this._formElement.querySelector(this._submitButtonSelector),this._inputElements.forEach((e=>{e.addEventListener("input",(t=>{this._checkInputValidity(e),this.toggleButtonState()}))}))}resetForm(){this._inputElements.forEach((e=>this._hideInputError(e))),this._disableSubmitButton()}enableValidation(e){this._formElement.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}}class r{constructor(e){let{popupSelector:t}=e;this._popupSelector=t,this._popupElement=document.querySelector(t)}open(){this._popupElement.classList.add("modal_opened"),document.addEventListener("keydown",this._handleEscClose)}close(){this._popupElement.classList.remove("modal_opened"),document.removeEventListener("keydown",this._handleEscClose)}_handleEscClose=e=>{"Escape"===e.key&&this.close()};setEventListeners(){this._popupElement.querySelector(".modal__close").addEventListener("click",(()=>{this.close()})),this._popupElement.addEventListener("mousedown",(e=>{e.target.classList.contains("modal_opened")&&this.close()}))}}class i extends r{constructor(e,t){super({popupSelector:e}),this._popupForm=this._popupElement.querySelector(".modal__form"),this._handleFormSubmit=t,this._inputList=[...this._popupForm.querySelectorAll(".modal__input")],this._submitButton=this._popupElement.querySelector(".modal__save"),this._submitButtonText=this._submitButton.textContent}renderLoading(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Saving...";this._submitButton.textContent=e?t:this._submitButtonText}_getInputValues(){const e={};return this._inputList.forEach((t=>{e[t.name]=t.value})),e}setEventListeners(){super.setEventListeners(),this._popupForm.addEventListener("submit",(e=>{e.preventDefault(),this._handleFormSubmit(this._getInputValues())}))}}class n{constructor(e,t){let{items:s,renderer:r}=e;this._item=s,this._renderer=r,this._classSection=t}renderItems(){this._item.forEach((e=>{this._renderer(e)}))}addItem(e){this._classSection.prepend(e)}setItems(e){this._items=e}}const o=document.querySelector(".card__list"),a=document.querySelector("#profile-edit-modal").querySelector(".modal__form"),l=document.querySelector("#profile-edit-btn"),d=document.querySelector("#profile-title-input"),h=document.querySelector("#profile-description-input"),c=document.querySelector("#edit-avatar-form"),u=document.querySelector(".profile__avatar-edit-button"),_=document.querySelector("#add-card-modal").querySelector(".modal__form"),m=document.querySelector(".profile__add-button"),p=new class{constructor(e){let{baseUrl:t,headers:s}=e;this._baseUrl=t,this._headers=s}_handleResponse(e){return e.ok?e.json():Promise.reject(`Error ${e.status}`)}_request(e,t){return fetch(e,t).then(this._handleResponse)}getUserInfo(){return fetch(`${this._baseUrl}/users/me`,{headers:this._headers}).then(this._handleResponse)}getInitialCards(){return fetch(`${this._baseUrl}/cards`,{headers:this._headers}).then(this._handleResponse)}updateProfileInfo(e){let{name:t,description:s}=e;return fetch(`${this._baseUrl}/users/me`,{method:"PATCH",headers:this._headers,body:JSON.stringify({name:t,about:s})}).then(this._handleResponse)}addCard(e){let{name:t,link:s}=e;return fetch(`${this._baseUrl}/cards`,{method:"POST",headers:this._headers,body:JSON.stringify({name:t,link:s})}).then(this._handleResponse)}deleteCard(e){return fetch(`${this._baseUrl}/cards/${e}`,{method:"DELETE",headers:this._headers}).then(this._handleResponse)}likeCard(e){return fetch(`${this._baseUrl}/cards/${e}/likes`,{method:"PUT",headers:this._headers}).then(this._handleResponse)}unlikeCard(e){return fetch(`${this._baseUrl}/cards/${e}/likes`,{method:"DELETE",headers:this._headers}).then(this._handleResponse)}updateProfileAvatar(e){return fetch(`${this._baseUrl}/users/me/avatar`,{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:e})}).then(this._handleResponse)}getAppData(){return Promise.all([this.getUserInfo(),this.getInitialCards()])}}({baseUrl:"https://around-api.en.tripleten-services.com/v1",headers:{authorization:"9d8df36b-440d-4bca-949a-3193d9385b7e","Content-Type":"application/json"}}),E=new i("#profile-edit-modal",(function(e){E.renderLoading(!0),p.updateProfileInfo(e).then((()=>{const t=e.name,s=e.description;k.setUserInfo({name:t,description:s}),E.close()})).catch((e=>{console.error(e),alert(`${e}, Could not update user info!`)})).finally((()=>{E.renderLoading(!1)}))}));E.setEventListeners();const v=new i("#avatar-edit-modal",(function(e){v.renderLoading(!0),p.updateProfileAvatar(e.url).then((e=>{k.setUserAvatar(e),v.close()})).catch(console.error).finally((()=>{v.renderLoading(!1)}))}));let f;v.setEventListeners();const S=new i("#add-card-modal",(function(e){S.renderLoading(!0),p.addCard({name:e.title,link:e.url}).then((e=>{g.addItem(C(e)),_.reset(),S.close(),q.resetForm()})).catch(console.error).finally((()=>{S.renderLoading(!1)}))}));S.setEventListeners();const L=new class extends r{constructor(e){let{popupSelector:t}=e;super({popupSelector:t}),this._popupForm=this._popupElement.querySelector(".modal__form"),this._submitButton=this._popupElement.querySelector(".modal__save"),this._submitButtonText=this._submitButton.textContent}handleDeleteConfirm(e){this._handleDeleteConfirm=e}setEventListeners(){super.setEventListeners(),this._popupForm.addEventListener("submit",(e=>{e.preventDefault(),this._handleDeleteConfirm()}))}renderLoading(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Deleting...";this._submitButton.textContent=e?t:this._submitButtonText}}({popupSelector:"#delete-card-modal"});L.setEventListeners();const b=new class extends r{constructor(e){super({popupSelector:e}),this._previewImage=this._popupElement.querySelector("#preview-image"),this._previewImageTitle=this._popupElement.querySelector("#preview-image-title")}open(e){let{name:t,link:s}=e;this._previewImage.src=s,this._previewImage.alt=t,this._previewImageTitle.textContent=t,super.open()}}("#preview-modal");let g;b.setEventListeners(),p.getAppData().then((e=>{let[t,s]=e;k.setUserInfo({name:t.name,description:t.about}),k.setUserAvatar({avatar:t.avatar}),f=t._id,g=new n({items:s,renderer:e=>{g.addItem(C(e))}},o),g.renderItems()})).catch(console.error);const k=new class{constructor(e){let{name:t,description:s,avatar:r}=e;this._name=document.querySelector(t),this._description=document.querySelector(s),this._avatar=document.querySelector(r)}getUserInfo(){return{name:this._name.textContent,description:this._description.textContent}}setUserInfo(e){let{name:t,description:s}=e;this._name.textContent=t,this._description.textContent=s}setUserAvatar(e){let{avatar:t}=e;this._avatar.src=t}}({name:".profile__title",description:".profile__description",avatar:".profile__image"});function C(e){return new t(e,"#card-template",y,I,B).getView()}function y(e,t){b.open(e,t)}function I(e,t){L.open(),L.handleDeleteConfirm((()=>{L.renderLoading(!0),p.deleteCard(e).then((()=>{I(),t.handleDeleteCard(),L.close()})).catch(console.error).finally((()=>{L.renderLoading(!1)}))}))}function B(e,t){t.getIsLikedState()?p.unlikeCard(e).then((e=>{t.flipLikeState(),t.updateLikes(e.isLiked)})).catch(console.error):p.likeCard(e).then((e=>{t.flipLikeState(),t.updateLikes(e.isLiked)})).catch(console.error)}l.addEventListener("click",(()=>{const e=k.getUserInfo();d.value=e.name,h.value=e.description,E.open()})),u.addEventListener("click",(()=>{v.open(),w.resetForm()})),m.addEventListener("click",(()=>{S.open(),q.toggleButtonState()}));const q=new s(e,_);q.enableValidation(),new s(e,a).enableValidation();const w=new s(e,c);w.enableValidation()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RUFDRzRCLFdBQVdDLEdBQ1hkLE1BQUssS0FDSi9HLElBQ0F1SyxFQUFLdkssbUJBQ0wwSixFQUFnQnZHLE9BQU8sSUFFeEJzRixNQUFNRSxRQUFRQyxPQUNkRSxTQUFRLEtBQ1BZLEVBQWdCMUYsZUFBYyxFQUFNLEdBQ3BDLEdBRVIsQ0FFQSxTQUFTc0csRUFBZXpDLEVBQVEyQyxHQUMxQkEsRUFBWXRLLGtCQUNkOEYsRUFDRytCLFdBQVdGLEdBQ1hkLE1BQU0wRCxJQUNMRCxFQUFZbEssZ0JBQ1prSyxFQUFZckssWUFBWXNLLEVBQWdCM0wsUUFBUSxJQUVqRDJKLE1BQU1FLFFBQVFDLE9BRWpCNUMsRUFDRzhCLFNBQVNELEdBQ1RkLE1BQU0wRCxJQUNMRCxFQUFZbEssZ0JBQ1prSyxFQUFZckssWUFBWXNLLEVBQWdCM0wsUUFBUSxJQUVqRDJKLE1BQU1FLFFBQVFDLE1BRXJCLENBS0FuRCxFQUFlNUYsaUJBQWlCLFNBQVMsS0FDdkMsTUFBTTZLLEVBQVluQyxFQUFTdkIsY0FDM0J0QixFQUFrQmxCLE1BQVFrRyxFQUFVaE0sS0FDcENpSCxFQUF3Qm5CLE1BQVFrRyxFQUFVdEQsWUFDMUNpQixFQUFpQnBGLE1BQU0sSUFJekI0QyxFQUFpQmhHLGlCQUFpQixTQUFTLEtBQ3pDa0osRUFBZ0I5RixPQUNoQjBILEVBQXdCbEksV0FBVyxJQUlyQ3NELEVBQVdsRyxpQkFBaUIsU0FBUyxLQUNuQ3FKLEVBQWFqRyxPQUNid0csRUFBcUJ4SCxtQkFBbUIsSUFNMUMsTUFBTXdILEVBQXVCLElBQUk3SSxFQUFjakQsRUFBU21JLEdBQ3hEMkQsRUFBcUIvRyxtQkFFWSxJQUFJOUIsRUFBY2pELEVBQVM2SCxHQUNuQzlDLG1CQUV6QixNQUFNaUksRUFBMEIsSUFBSS9KLEVBQWNqRCxFQUFTaUksR0FDM0QrRSxFQUF3QmpJLGtCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy91dGlscy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvcGFnZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL0FQSS5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBEZWxldGVDYXJkLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLy4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNvbnN0IGluaXRpYWxDYXJkcyA9IFtcclxuICB7XHJcbiAgICBuYW1lOiBcIllvc2VtaXRlIFZhbGxleVwiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L3lvc2VtaXRlLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJMYWtlIExvdWlzZVwiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xha2UtbG91aXNlLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJCYWxkIE1vdW50YWluc1wiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2JhbGQtbW91bnRhaW5zLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJMYXRlbWFyXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGF0ZW1hci5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiVmFub2lzZSBOYXRpb25hbCBQYXJrXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvdmFub2lzZS5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiTGFnbyBkaSBCcmFpZXNcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9sYWdvLmpwZ1wiLFxyXG4gIH0sXHJcbl07XHJcblxyXG5leHBvcnQgY29uc3Qgb3B0aW9ucyA9IHtcclxuICBmb3JtU2VsZWN0b3I6IFwiLm1vZGFsX19mb3JtXCIsXHJcbiAgaW5wdXRTZWxlY3RvcjogXCIubW9kYWxfX2lucHV0XCIsXHJcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLm1vZGFsX19zYXZlXCIsXHJcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJtb2RhbF9fYnV0dG9uX2Rpc2FibGVkXCIsXHJcbiAgaW5wdXRFcnJvckNsYXNzOiBcIm1vZGFsX19pbnB1dC1lcnJvclwiLFxyXG4gIGVycm9yQ2xhc3M6IFwibW9kYWxfX2Vycm9yXCIsXHJcbn07XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcmQge1xyXG4gIGNvbnN0cnVjdG9yKFxyXG4gICAgZGF0YSxcclxuICAgIGNhcmRTZWxlY3RvcixcclxuICAgIGhhbmRsZUltYWdlQ2xpY2ssXHJcbiAgICBoYW5kbGVEZWxldGVDbGljayxcclxuICAgIGhhbmRsZUxpa2VDbGlja1xyXG4gICkge1xyXG4gICAgdGhpcy5uYW1lID0gZGF0YS5uYW1lO1xyXG4gICAgdGhpcy5saW5rID0gZGF0YS5saW5rO1xyXG4gICAgdGhpcy5faWQgPSBkYXRhLl9pZDtcclxuICAgIHRoaXMuX2lzTGlrZWQgPSBkYXRhLmlzTGlrZWQ7XHJcbiAgICB0aGlzLl91c2VySWQgPSBkYXRhLl91c2VySWQ7XHJcbiAgICB0aGlzLl9jYXJkU2VsZWN0b3IgPSBjYXJkU2VsZWN0b3I7XHJcbiAgICB0aGlzLl9oYW5kbGVJbWFnZUNsaWNrID0gaGFuZGxlSW1hZ2VDbGljaztcclxuICAgIHRoaXMuX2hhbmRsZURlbGV0ZUNsaWNrID0gaGFuZGxlRGVsZXRlQ2xpY2s7XHJcbiAgICB0aGlzLl9oYW5kbGVMaWtlQ2xpY2sgPSBoYW5kbGVMaWtlQ2xpY2s7XHJcbiAgICB0aGlzLl9wcmV2aWV3SW1hZ2VFbGVtZW50ID0gbnVsbDtcclxuICB9XHJcblxyXG4gIF9nZXRUZW1wbGF0ZSgpIHtcclxuICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gZG9jdW1lbnRcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IodGhpcy5fY2FyZFNlbGVjdG9yKVxyXG4gICAgICAuY29udGVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2NvbnRlbnRcIilcclxuICAgICAgLmNsb25lTm9kZSh0cnVlKTtcclxuICAgIHJldHVybiBjYXJkRWxlbWVudDtcclxuICB9XHJcblxyXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX2xpa2VCdXR0b24gPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiI2xpa2UtYnV0dG9uXCIpO1xyXG4gICAgdGhpcy5fbGlrZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT5cclxuICAgICAgdGhpcy5faGFuZGxlTGlrZUNsaWNrKHRoaXMuX2lkLCB0aGlzKVxyXG4gICAgKTtcclxuXHJcbiAgICB0aGlzLl9kZWxldGVCdXR0b24gPSB0aGlzLl9jYXJkRWxlbWVudFxyXG4gICAgICAucXVlcnlTZWxlY3RvcihcIiNkZWxldGUtYnV0dG9uXCIpXHJcbiAgICAgIC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gdGhpcy5faGFuZGxlRGVsZXRlQ2xpY2sodGhpcy5faWQsIHRoaXMpKTtcclxuXHJcbiAgICB0aGlzLl9jYXJkSW1hZ2VFbGVtZW50ID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIiNjYXJkLWltYWdlXCIpO1xyXG4gICAgdGhpcy5fY2FyZEltYWdlRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICB0aGlzLl9oYW5kbGVJbWFnZUNsaWNrKHtcclxuICAgICAgICBuYW1lOiB0aGlzLm5hbWUsXHJcbiAgICAgICAgbGluazogdGhpcy5saW5rLFxyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgaGFuZGxlRGVsZXRlQ2FyZCgpIHtcclxuICAgIHRoaXMuX2NhcmRFbGVtZW50LnJlbW92ZSgpO1xyXG4gICAgdGhpcy5fY2FyZEVsZW1lbnQgPSBudWxsO1xyXG4gIH1cclxuXHJcbiAgZ2V0SXNMaWtlZFN0YXRlKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX2lzTGlrZWQ7XHJcbiAgfVxyXG5cclxuICB1cGRhdGVMaWtlcygpIHtcclxuICAgIGlmICh0aGlzLl9pc0xpa2VkKSB7XHJcbiAgICAgIHRoaXMuX2xpa2VCdXR0b24uY2xhc3NMaXN0LmFkZChcImNhcmRfX2xpa2UtYnV0dG9uX2FjdGl2ZVwiKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX2xpa2VCdXR0b24uY2xhc3NMaXN0LnJlbW92ZShcImNhcmRfX2xpa2UtYnV0dG9uX2FjdGl2ZVwiKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGZsaXBMaWtlU3RhdGUoKSB7XHJcbiAgICB0aGlzLl9pc0xpa2VkID0gIXRoaXMuX2lzTGlrZWQ7XHJcbiAgfVxyXG5cclxuICBnZXRWaWV3KCkge1xyXG4gICAgdGhpcy5fY2FyZEVsZW1lbnQgPSB0aGlzLl9nZXRUZW1wbGF0ZSgpO1xyXG4gICAgdGhpcy5fbGlrZUJ1dHRvbiA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjbGlrZS1idXR0b25cIik7XHJcbiAgICB0aGlzLl9kZWxldGVCdXR0b24gPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiI2RlbGV0ZS1idXR0b25cIik7XHJcbiAgICB0aGlzLl9jYXJkSW1hZ2VFbGVtZW50ID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIiNjYXJkLWltYWdlXCIpO1xyXG4gICAgdGhpcy5fY2FyZFRpdGxlRWxlbWVudCA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjY2FyZC10aXRsZVwiKTtcclxuXHJcbiAgICB0aGlzLnVwZGF0ZUxpa2VzKCk7XHJcbiAgICB0aGlzLl9jYXJkSW1hZ2VFbGVtZW50LnNyYyA9IHRoaXMubGluaztcclxuICAgIHRoaXMuX2NhcmRJbWFnZUVsZW1lbnQuYWx0ID0gdGhpcy5uYW1lO1xyXG4gICAgdGhpcy5fY2FyZFRpdGxlRWxlbWVudC50ZXh0Q29udGVudCA9IHRoaXMubmFtZTtcclxuXHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgcmV0dXJuIHRoaXMuX2NhcmRFbGVtZW50O1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBGb3JtVmFsaWRhdG9yIHtcclxuICBjb25zdHJ1Y3RvcihvcHRpb25zLCBmb3JtRWxlbWVudCkge1xyXG4gICAgdGhpcy5fZm9ybUVsZW1lbnQgPSBmb3JtRWxlbWVudDtcclxuICAgIHRoaXMuX2Zvcm1TZWxlY3RvciA9IG9wdGlvbnMuZm9ybVNlbGVjdG9yO1xyXG4gICAgdGhpcy5faW5wdXRTZWxlY3RvciA9IG9wdGlvbnMuaW5wdXRTZWxlY3RvcjtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yID0gb3B0aW9ucy5zdWJtaXRCdXR0b25TZWxlY3RvcjtcclxuICAgIHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MgPSBvcHRpb25zLmluYWN0aXZlQnV0dG9uQ2xhc3M7XHJcbiAgICB0aGlzLl9pbnB1dEVycm9yQ2xhc3MgPSBvcHRpb25zLmlucHV0RXJyb3JDbGFzcztcclxuICAgIHRoaXMuX2Vycm9yQ2xhc3MgPSBvcHRpb25zLmVycm9yQ2xhc3M7XHJcbiAgfVxyXG5cclxuICBfc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50KSB7XHJcbiAgICB0aGlzLl9lcnJvck1lc3NhZ2UgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBgIyR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmBcclxuICAgICk7XHJcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgdGhpcy5fZXJyb3JNZXNzYWdlLnRleHRDb250ZW50ID0gaW5wdXRFbGVtZW50LnZhbGlkYXRpb25NZXNzYWdlO1xyXG4gICAgdGhpcy5fZXJyb3JNZXNzYWdlLmNsYXNzTGlzdC5hZGQodGhpcy5fZXJyb3JDbGFzcyk7XHJcbiAgfVxyXG5cclxuICBfaGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KSB7XHJcbiAgICB0aGlzLl9lcnJvck1lc3NhZ2UgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBgIyR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmBcclxuICAgICk7XHJcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgdGhpcy5fZXJyb3JNZXNzYWdlLnRleHRDb250ZW50ID0gXCJcIjtcclxuICAgIHRoaXMuX2Vycm9yTWVzc2FnZS5jbGFzc0xpc3QuYWRkKHRoaXMuX2Vycm9yQ2xhc3MpO1xyXG4gIH1cclxuXHJcbiAgX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpIHtcclxuICAgIGlmICghaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKSB7XHJcbiAgICAgIHJldHVybiB0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xyXG4gICAgfVxyXG4gICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcclxuICB9XHJcblxyXG4gIF9oYXNJbnZhbGlkSW5wdXQoKSB7XHJcbiAgICByZXR1cm4gIXRoaXMuX2lucHV0RWxlbWVudHMuZXZlcnkoXHJcbiAgICAgIChpbnB1dEVsZW1lbnQpID0+IGlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZFxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIHRvZ2dsZUJ1dHRvblN0YXRlKCkge1xyXG4gICAgaWYgKHRoaXMuX2hhc0ludmFsaWRJbnB1dCgpKSB7XHJcbiAgICAgIHRoaXMuX2Rpc2FibGVTdWJtaXRCdXR0b24oKTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgdGhpcy5fZW5hYmxlU3VibWl0QnV0dG9uKCk7XHJcbiAgfVxyXG5cclxuICBfZW5hYmxlU3VibWl0QnV0dG9uKCkge1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcclxuICB9XHJcblxyXG4gIF9kaXNhYmxlU3VibWl0QnV0dG9uKCkge1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5hZGQodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24uZGlzYWJsZWQgPSB0cnVlO1xyXG4gIH1cclxuXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5faW5wdXRFbGVtZW50cyA9IFtcclxuICAgICAgLi4udGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9pbnB1dFNlbGVjdG9yKSxcclxuICAgIF07XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24gPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvclxyXG4gICAgKTtcclxuXHJcbiAgICB0aGlzLl9pbnB1dEVsZW1lbnRzLmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsIChlKSA9PiB7XHJcbiAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCk7XHJcbiAgICAgICAgdGhpcy50b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH1cclxuICByZXNldEZvcm0oKSB7XHJcbiAgICB0aGlzLl9pbnB1dEVsZW1lbnRzLmZvckVhY2goKGlucHV0RWxlbWVudCkgPT5cclxuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KVxyXG4gICAgKTtcclxuICAgIHRoaXMuX2Rpc2FibGVTdWJtaXRCdXR0b24oKTtcclxuICB9XHJcblxyXG4gIGVuYWJsZVZhbGlkYXRpb24ob3B0aW9ucykge1xyXG4gICAgdGhpcy5fZm9ybUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZSkgPT4ge1xyXG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IoeyBwb3B1cFNlbGVjdG9yIH0pIHtcclxuICAgIHRoaXMuX3BvcHVwU2VsZWN0b3IgPSBwb3B1cFNlbGVjdG9yO1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTtcclxuICB9XHJcblxyXG4gIG9wZW4oKSB7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcIm1vZGFsX29wZW5lZFwiKTtcclxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcclxuICB9XHJcblxyXG4gIGNsb3NlKCkge1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJtb2RhbF9vcGVuZWRcIik7XHJcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcbiAgfVxyXG5cclxuICBfaGFuZGxlRXNjQ2xvc2UgPSAoZSkgPT4ge1xyXG4gICAgaWYgKGUua2V5ID09PSBcIkVzY2FwZVwiKSB7XHJcbiAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIGNvbnN0IGNsb3NlQnV0dG9uID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Nsb3NlXCIpO1xyXG4gICAgY2xvc2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfSk7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCAoZSkgPT4ge1xyXG4gICAgICBpZiAoZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwibW9kYWxfb3BlbmVkXCIpKSB7XHJcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIGhhbmRsZUZvcm1TdWJtaXQpIHtcclxuICAgIHN1cGVyKHsgcG9wdXBTZWxlY3RvciB9KTtcclxuICAgIHRoaXMuX3BvcHVwRm9ybSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19mb3JtXCIpO1xyXG4gICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCA9IGhhbmRsZUZvcm1TdWJtaXQ7XHJcbiAgICB0aGlzLl9pbnB1dExpc3QgPSBbLi4udGhpcy5fcG9wdXBGb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoXCIubW9kYWxfX2lucHV0XCIpXTtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbiA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19zYXZlXCIpO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uVGV4dCA9IHRoaXMuX3N1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudDtcclxuICB9XHJcblxyXG4gIHJlbmRlckxvYWRpbmcoaXNMb2FkaW5nLCBsb2FkaW5nVGV4dCA9IFwiU2F2aW5nLi4uXCIpIHtcclxuICAgIGlmIChpc0xvYWRpbmcpIHtcclxuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLnRleHRDb250ZW50ID0gbG9hZGluZ1RleHQ7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24udGV4dENvbnRlbnQgPSB0aGlzLl9zdWJtaXRCdXR0b25UZXh0O1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgX2dldElucHV0VmFsdWVzKCkge1xyXG4gICAgY29uc3QgZm9ybVZhbHVlcyA9IHt9O1xyXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICBmb3JtVmFsdWVzW2lucHV0RWxlbWVudC5uYW1lXSA9IGlucHV0RWxlbWVudC52YWx1ZTtcclxuICAgIH0pO1xyXG5cclxuICAgIHJldHVybiBmb3JtVmFsdWVzO1xyXG4gIH1cclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuICAgIHRoaXMuX3BvcHVwRm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChlKSA9PiB7XHJcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCh0aGlzLl9nZXRJbnB1dFZhbHVlcygpKTtcclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBTZWN0aW9uIHtcclxuICBjb25zdHJ1Y3Rvcih7IGl0ZW1zLCByZW5kZXJlciB9LCBjbGFzc1NlbGVjdG9yKSB7XHJcbiAgICB0aGlzLl9pdGVtID0gaXRlbXM7XHJcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xyXG4gICAgdGhpcy5fY2xhc3NTZWN0aW9uID0gY2xhc3NTZWxlY3RvcjtcclxuICB9XHJcblxyXG4gIHJlbmRlckl0ZW1zKCkge1xyXG4gICAgdGhpcy5faXRlbS5mb3JFYWNoKChpdGVtKSA9PiB7XHJcbiAgICAgIHRoaXMuX3JlbmRlcmVyKGl0ZW0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG4gIGFkZEl0ZW0oZWxlbWVudCkge1xyXG4gICAgdGhpcy5fY2xhc3NTZWN0aW9uLnByZXBlbmQoZWxlbWVudCk7XHJcbiAgfVxyXG5cclxuICBzZXRJdGVtcyhpdGVtcykge1xyXG4gICAgdGhpcy5faXRlbXMgPSBpdGVtcztcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFwiLi4vcGFnZXMvaW5kZXguY3NzXCI7XHJcbmltcG9ydCB7IGluaXRpYWxDYXJkcywgb3B0aW9ucyB9IGZyb20gXCIuLi91dGlscy9jb25zdGFudHMuanNcIjtcclxuaW1wb3J0IENhcmQgZnJvbSBcIi4uL2NvbXBvbmVudHMvQ2FyZC5qc1wiO1xyXG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanNcIjtcclxuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzXCI7XHJcbmltcG9ydCBTZWN0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1NlY3Rpb24uanNcIjtcclxuaW1wb3J0IFVzZXJJbmZvIGZyb20gXCIuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzXCI7XHJcbmltcG9ydCBBcGkgZnJvbSBcIi4uL2NvbXBvbmVudHMvQVBJLmpzXCI7XHJcbmltcG9ydCBQb3B1cERlbGV0ZUNhcmQgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBEZWxldGVDYXJkLmpzXCI7XHJcblxyXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xyXG4vKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFbGVtZW50cyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xyXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xyXG4vL1RlbXBsYXRlc1xyXG5jb25zdCBjYXJkTGlzdEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2xpc3RcIik7XHJcblxyXG4vL0VkaXQgUHJvZmlsZVxyXG5jb25zdCBwcm9maWxlRWRpdE1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLWVkaXQtbW9kYWxcIik7XHJcbmNvbnN0IHByb2ZpbGVFZGl0Rm9ybSA9IHByb2ZpbGVFZGl0TW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybVwiKTtcclxuY29uc3QgcHJvZmlsZUVkaXRCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtZWRpdC1idG5cIik7XHJcbmNvbnN0IHByb2ZpbGVUaXRsZUlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLXRpdGxlLWlucHV0XCIpO1xyXG5jb25zdCBwcm9maWxlRGVzY3JpcHRpb25JbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgXCIjcHJvZmlsZS1kZXNjcmlwdGlvbi1pbnB1dFwiXHJcbik7XHJcblxyXG4vL0VkaXQgQXZhdGFyXHJcbmNvbnN0IGVkaXRBdmF0YXJGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNlZGl0LWF2YXRhci1mb3JtXCIpO1xyXG5jb25zdCBlZGl0QXZhdGFyQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19hdmF0YXItZWRpdC1idXR0b25cIik7XHJcblxyXG4vL0FkZCBOZXcgQ2FyZFxyXG5jb25zdCBhZGRDYXJkTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2FkZC1jYXJkLW1vZGFsXCIpO1xyXG5jb25zdCBhZGRDYXJkRm9ybSA9IGFkZENhcmRNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19mb3JtXCIpO1xyXG5jb25zdCBhZGRDYXJkQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19hZGQtYnV0dG9uXCIpO1xyXG5cclxuLy9BUElcclxuY29uc3QgYXBpID0gbmV3IEFwaSh7XHJcbiAgYmFzZVVybDogXCJodHRwczovL2Fyb3VuZC1hcGkuZW4udHJpcGxldGVuLXNlcnZpY2VzLmNvbS92MVwiLFxyXG4gIGhlYWRlcnM6IHtcclxuICAgIGF1dGhvcml6YXRpb246IFwiOWQ4ZGYzNmItNDQwZC00YmNhLTk0OWEtMzE5M2Q5Mzg1YjdlXCIsXHJcbiAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcclxuICB9LFxyXG59KTtcclxuXHJcbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXHJcbi8qICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFBvcHVwcyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICovXHJcbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXHJcbi8vRWRpdCBQcm9maWxlIFBvcHVwXHJcbmNvbnN0IGVkaXRQcm9maWxlUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybShcclxuICBcIiNwcm9maWxlLWVkaXQtbW9kYWxcIixcclxuICBoYW5kbGVQcm9maWxlRWRpdFN1Ym1pdFxyXG4pO1xyXG5lZGl0UHJvZmlsZVBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG4vL0VkaXQgQXZhdGFyIFBvcHVwXHJcbmNvbnN0IGVkaXRBdmF0YXJQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKFxyXG4gIFwiI2F2YXRhci1lZGl0LW1vZGFsXCIsXHJcbiAgaGFuZGxlTmV3QXZhdGFyU3VibWl0XHJcbik7XHJcbmVkaXRBdmF0YXJQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5sZXQgdXNlcklkO1xyXG5cclxuLy9BZGQgTmV3IENhcmQgUG9wdXBcclxuY29uc3QgbmV3Q2FyZFBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oXCIjYWRkLWNhcmQtbW9kYWxcIiwgaGFuZGxlQWRkQ2FyZFN1Ym1pdCk7XHJcbm5ld0NhcmRQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuLy9EZWVsdGUgQ2FyZCBQb3B1cFxyXG5jb25zdCBkZWxldGVDYXJkUG9wdXAgPSBuZXcgUG9wdXBEZWxldGVDYXJkKHtcclxuICBwb3B1cFNlbGVjdG9yOiBcIiNkZWxldGUtY2FyZC1tb2RhbFwiLFxyXG59KTtcclxuZGVsZXRlQ2FyZFBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG4vL1ByZXZpZXcgSW1hZ2UgUG9wdXBcclxuY29uc3QgcHJldmlld0ltYWdlUG9wdXAgPSBuZXcgUG9wdXBXaXRoSW1hZ2UoXCIjcHJldmlldy1tb2RhbFwiKTtcclxucHJldmlld0ltYWdlUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbi8vU2VjdGlvblxyXG5sZXQgY2FyZFNlY3Rpb247XHJcbmFwaVxyXG4gIC5nZXRBcHBEYXRhKClcclxuICAudGhlbigoW3VzZXJEYXRhLCBpbml0aWFsQ2FyZHNdKSA9PiB7XHJcbiAgICB1c2VySW5mby5zZXRVc2VySW5mbyh7XHJcbiAgICAgIG5hbWU6IHVzZXJEYXRhLm5hbWUsXHJcbiAgICAgIGRlc2NyaXB0aW9uOiB1c2VyRGF0YS5hYm91dCxcclxuICAgIH0pO1xyXG4gICAgdXNlckluZm8uc2V0VXNlckF2YXRhcih7IGF2YXRhcjogdXNlckRhdGEuYXZhdGFyIH0pO1xyXG4gICAgdXNlcklkID0gdXNlckRhdGEuX2lkO1xyXG5cclxuICAgIGNhcmRTZWN0aW9uID0gbmV3IFNlY3Rpb24oXHJcbiAgICAgIHtcclxuICAgICAgICBpdGVtczogaW5pdGlhbENhcmRzLFxyXG4gICAgICAgIHJlbmRlcmVyOiAoaXRlbSkgPT4ge1xyXG4gICAgICAgICAgY2FyZFNlY3Rpb24uYWRkSXRlbShjcmVhdGVDYXJkKGl0ZW0pKTtcclxuICAgICAgICB9LFxyXG4gICAgICB9LFxyXG4gICAgICBjYXJkTGlzdEVsZW1lbnRcclxuICAgICk7XHJcbiAgICBjYXJkU2VjdGlvbi5yZW5kZXJJdGVtcygpO1xyXG4gIH0pXHJcbiAgLmNhdGNoKGNvbnNvbGUuZXJyb3IpO1xyXG5cclxuLy9Vc2VySW5mb1xyXG5jb25zdCB1c2VySW5mbyA9IG5ldyBVc2VySW5mbyh7XHJcbiAgbmFtZTogXCIucHJvZmlsZV9fdGl0bGVcIixcclxuICBkZXNjcmlwdGlvbjogXCIucHJvZmlsZV9fZGVzY3JpcHRpb25cIixcclxuICBhdmF0YXI6IFwiLnByb2ZpbGVfX2ltYWdlXCIsXHJcbn0pO1xyXG5cclxuLy9DcmVhdGUgQ2FyZFxyXG5mdW5jdGlvbiBjcmVhdGVDYXJkKGRhdGEpIHtcclxuICBjb25zdCBjYXJkID0gbmV3IENhcmQoXHJcbiAgICBkYXRhLFxyXG4gICAgXCIjY2FyZC10ZW1wbGF0ZVwiLFxyXG4gICAgaGFuZGxlSW1hZ2VDbGljayxcclxuICAgIGhhbmRsZURlbGV0ZUNhcmQsXHJcbiAgICBoYW5kbGVMaWtlQ2FyZFxyXG4gICk7XHJcbiAgcmV0dXJuIGNhcmQuZ2V0VmlldygpO1xyXG59XHJcblxyXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xyXG4vKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBGdW5jdGlvbnMgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xyXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xyXG5mdW5jdGlvbiBoYW5kbGVJbWFnZUNsaWNrKG5hbWUsIGxpbmspIHtcclxuICBwcmV2aWV3SW1hZ2VQb3B1cC5vcGVuKG5hbWUsIGxpbmspO1xyXG59XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVQcm9maWxlRWRpdFN1Ym1pdChwcm9maWxlRGF0YSkge1xyXG4gIGVkaXRQcm9maWxlUG9wdXAucmVuZGVyTG9hZGluZyh0cnVlKTtcclxuICBhcGlcclxuICAgIC51cGRhdGVQcm9maWxlSW5mbyhwcm9maWxlRGF0YSlcclxuICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgY29uc3QgbmFtZSA9IHByb2ZpbGVEYXRhLm5hbWU7XHJcbiAgICAgIGNvbnN0IGRlc2NyaXB0aW9uID0gcHJvZmlsZURhdGEuZGVzY3JpcHRpb247XHJcbiAgICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKHsgbmFtZSwgZGVzY3JpcHRpb24gfSk7XHJcbiAgICAgIGVkaXRQcm9maWxlUG9wdXAuY2xvc2UoKTtcclxuICAgIH0pXHJcbiAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICBjb25zb2xlLmVycm9yKGVycik7XHJcbiAgICAgIGFsZXJ0KGAke2Vycn0sIENvdWxkIG5vdCB1cGRhdGUgdXNlciBpbmZvIWApO1xyXG4gICAgfSlcclxuICAgIC5maW5hbGx5KCgpID0+IHtcclxuICAgICAgZWRpdFByb2ZpbGVQb3B1cC5yZW5kZXJMb2FkaW5nKGZhbHNlKTtcclxuICAgIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVBZGRDYXJkU3VibWl0KGlucHV0VmFsdWVzKSB7XHJcbiAgbmV3Q2FyZFBvcHVwLnJlbmRlckxvYWRpbmcodHJ1ZSk7XHJcbiAgYXBpXHJcbiAgICAuYWRkQ2FyZCh7IG5hbWU6IGlucHV0VmFsdWVzLnRpdGxlLCBsaW5rOiBpbnB1dFZhbHVlcy51cmwgfSlcclxuICAgIC50aGVuKChuZXdDYXJkRGF0YSkgPT4ge1xyXG4gICAgICBjYXJkU2VjdGlvbi5hZGRJdGVtKGNyZWF0ZUNhcmQobmV3Q2FyZERhdGEpKTtcclxuICAgICAgYWRkQ2FyZEZvcm0ucmVzZXQoKTtcclxuICAgICAgbmV3Q2FyZFBvcHVwLmNsb3NlKCk7XHJcbiAgICAgIGFkZENhcmRGb3JtVmFsaWRhdG9yLnJlc2V0Rm9ybSgpO1xyXG4gICAgfSlcclxuICAgIC5jYXRjaChjb25zb2xlLmVycm9yKVxyXG4gICAgLmZpbmFsbHkoKCkgPT4ge1xyXG4gICAgICBuZXdDYXJkUG9wdXAucmVuZGVyTG9hZGluZyhmYWxzZSk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gaGFuZGxlTmV3QXZhdGFyU3VibWl0KGRhdGEpIHtcclxuICBlZGl0QXZhdGFyUG9wdXAucmVuZGVyTG9hZGluZyh0cnVlKTtcclxuICBhcGlcclxuICAgIC51cGRhdGVQcm9maWxlQXZhdGFyKGRhdGEudXJsKVxyXG4gICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICB1c2VySW5mby5zZXRVc2VyQXZhdGFyKHJlcyk7XHJcbiAgICAgIGVkaXRBdmF0YXJQb3B1cC5jbG9zZSgpO1xyXG4gICAgfSlcclxuICAgIC5jYXRjaChjb25zb2xlLmVycm9yKVxyXG4gICAgLmZpbmFsbHkoKCkgPT4ge1xyXG4gICAgICBlZGl0QXZhdGFyUG9wdXAucmVuZGVyTG9hZGluZyhmYWxzZSk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gaGFuZGxlRGVsZXRlQ2FyZChjYXJkSWQsIGNhcmQpIHtcclxuICBkZWxldGVDYXJkUG9wdXAub3BlbigpO1xyXG4gIGRlbGV0ZUNhcmRQb3B1cC5oYW5kbGVEZWxldGVDb25maXJtKCgpID0+IHtcclxuICAgIGRlbGV0ZUNhcmRQb3B1cC5yZW5kZXJMb2FkaW5nKHRydWUpO1xyXG4gICAgYXBpXHJcbiAgICAgIC5kZWxldGVDYXJkKGNhcmRJZClcclxuICAgICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgIGhhbmRsZURlbGV0ZUNhcmQoKTtcclxuICAgICAgICBjYXJkLmhhbmRsZURlbGV0ZUNhcmQoKTtcclxuICAgICAgICBkZWxldGVDYXJkUG9wdXAuY2xvc2UoKTtcclxuICAgICAgfSlcclxuICAgICAgLmNhdGNoKGNvbnNvbGUuZXJyb3IpXHJcbiAgICAgIC5maW5hbGx5KCgpID0+IHtcclxuICAgICAgICBkZWxldGVDYXJkUG9wdXAucmVuZGVyTG9hZGluZyhmYWxzZSk7XHJcbiAgICAgIH0pO1xyXG4gIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVMaWtlQ2FyZChjYXJkSWQsIGNhcmRFbGVtZW50KSB7XHJcbiAgaWYgKGNhcmRFbGVtZW50LmdldElzTGlrZWRTdGF0ZSgpKSB7XHJcbiAgICBhcGlcclxuICAgICAgLnVubGlrZUNhcmQoY2FyZElkKVxyXG4gICAgICAudGhlbigodXBkYXRlZENhcmREYXRhKSA9PiB7XHJcbiAgICAgICAgY2FyZEVsZW1lbnQuZmxpcExpa2VTdGF0ZSgpO1xyXG4gICAgICAgIGNhcmRFbGVtZW50LnVwZGF0ZUxpa2VzKHVwZGF0ZWRDYXJkRGF0YS5pc0xpa2VkKTtcclxuICAgICAgfSlcclxuICAgICAgLmNhdGNoKGNvbnNvbGUuZXJyb3IpO1xyXG4gIH0gZWxzZSB7XHJcbiAgICBhcGlcclxuICAgICAgLmxpa2VDYXJkKGNhcmRJZClcclxuICAgICAgLnRoZW4oKHVwZGF0ZWRDYXJkRGF0YSkgPT4ge1xyXG4gICAgICAgIGNhcmRFbGVtZW50LmZsaXBMaWtlU3RhdGUoKTtcclxuICAgICAgICBjYXJkRWxlbWVudC51cGRhdGVMaWtlcyh1cGRhdGVkQ2FyZERhdGEuaXNMaWtlZCk7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5jYXRjaChjb25zb2xlLmVycm9yKTtcclxuICB9XHJcbn1cclxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxuLyogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRXZlbnQgTGlzdGVuZXJzICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cclxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxuLy9FZGl0IFByb2ZpbGUgRm9ybVxyXG5wcm9maWxlRWRpdEJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIGNvbnN0IHVzZXJJbnB1dCA9IHVzZXJJbmZvLmdldFVzZXJJbmZvKCk7XHJcbiAgcHJvZmlsZVRpdGxlSW5wdXQudmFsdWUgPSB1c2VySW5wdXQubmFtZTtcclxuICBwcm9maWxlRGVzY3JpcHRpb25JbnB1dC52YWx1ZSA9IHVzZXJJbnB1dC5kZXNjcmlwdGlvbjtcclxuICBlZGl0UHJvZmlsZVBvcHVwLm9wZW4oKTtcclxufSk7XHJcblxyXG4vL0VkaXQgQXZhdGFyIEZvcm1cclxuZWRpdEF2YXRhckJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIGVkaXRBdmF0YXJQb3B1cC5vcGVuKCk7XHJcbiAgZWRpdEF2YXRhckZvcm1WYWxpZGF0b3IucmVzZXRGb3JtKCk7XHJcbn0pO1xyXG5cclxuLy9OZXcgQ2FyZCBGb3JtXHJcbmFkZENhcmRCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICBuZXdDYXJkUG9wdXAub3BlbigpO1xyXG4gIGFkZENhcmRGb3JtVmFsaWRhdG9yLnRvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbn0pO1xyXG5cclxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxuLyogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVmFsaWRhdGlvbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICovXHJcbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXHJcbmNvbnN0IGFkZENhcmRGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3Iob3B0aW9ucywgYWRkQ2FyZEZvcm0pO1xyXG5hZGRDYXJkRm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcblxyXG5jb25zdCBwcm9maWxlRWRpdEZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihvcHRpb25zLCBwcm9maWxlRWRpdEZvcm0pO1xyXG5wcm9maWxlRWRpdEZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG5cclxuY29uc3QgZWRpdEF2YXRhckZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihvcHRpb25zLCBlZGl0QXZhdGFyRm9ybSk7XHJcbmVkaXRBdmF0YXJGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQXBpIHtcclxuICBjb25zdHJ1Y3Rvcih7IGJhc2VVcmwsIGhlYWRlcnMgfSkge1xyXG4gICAgdGhpcy5fYmFzZVVybCA9IGJhc2VVcmw7XHJcbiAgICB0aGlzLl9oZWFkZXJzID0gaGVhZGVycztcclxuICB9XHJcblxyXG4gIF9oYW5kbGVSZXNwb25zZShyZXMpIHtcclxuICAgIGlmIChyZXMub2spIHtcclxuICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yICR7cmVzLnN0YXR1c31gKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIF9yZXF1ZXN0KHVybCwgb3B0aW9ucykge1xyXG4gICAgcmV0dXJuIGZldGNoKHVybCwgb3B0aW9ucykudGhlbih0aGlzLl9oYW5kbGVSZXNwb25zZSk7XHJcbiAgfVxyXG5cclxuICBnZXRVc2VySW5mbygpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZWAsIHtcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgIH0pLnRoZW4odGhpcy5faGFuZGxlUmVzcG9uc2UpO1xyXG4gIH1cclxuXHJcbiAgZ2V0SW5pdGlhbENhcmRzKCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzYCwge1xyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgfSkudGhlbih0aGlzLl9oYW5kbGVSZXNwb25zZSk7XHJcbiAgfVxyXG5cclxuICB1cGRhdGVQcm9maWxlSW5mbyh7IG5hbWUsIGRlc2NyaXB0aW9uIH0pIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZWAsIHtcclxuICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICBuYW1lLFxyXG4gICAgICAgIGFib3V0OiBkZXNjcmlwdGlvbixcclxuICAgICAgfSksXHJcbiAgICB9KS50aGVuKHRoaXMuX2hhbmRsZVJlc3BvbnNlKTtcclxuICB9XHJcblxyXG4gIGFkZENhcmQoeyBuYW1lLCBsaW5rIH0pIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkc2AsIHtcclxuICAgICAgbWV0aG9kOiBcIlBPU1RcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgIG5hbWUsXHJcbiAgICAgICAgbGluayxcclxuICAgICAgfSksXHJcbiAgICB9KS50aGVuKHRoaXMuX2hhbmRsZVJlc3BvbnNlKTtcclxuICB9XHJcblxyXG4gIGRlbGV0ZUNhcmQoY2FyZElkKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHMvJHtjYXJkSWR9YCwge1xyXG4gICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICB9KS50aGVuKHRoaXMuX2hhbmRsZVJlc3BvbnNlKTtcclxuICB9XHJcblxyXG4gIGxpa2VDYXJkKGNhcmRJZCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzLyR7Y2FyZElkfS9saWtlc2AsIHtcclxuICAgICAgbWV0aG9kOiBcIlBVVFwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgfSkudGhlbih0aGlzLl9oYW5kbGVSZXNwb25zZSk7XHJcbiAgfVxyXG5cclxuICB1bmxpa2VDYXJkKGNhcmRJZCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzLyR7Y2FyZElkfS9saWtlc2AsIHtcclxuICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgfSkudGhlbih0aGlzLl9oYW5kbGVSZXNwb25zZSk7XHJcbiAgfVxyXG5cclxuICB1cGRhdGVQcm9maWxlQXZhdGFyKHVybCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lL2F2YXRhcmAsIHtcclxuICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICBhdmF0YXI6IHVybCxcclxuICAgICAgfSksXHJcbiAgICB9KS50aGVuKHRoaXMuX2hhbmRsZVJlc3BvbnNlKTtcclxuICB9XHJcblxyXG4gIGdldEFwcERhdGEoKSB7XHJcbiAgICByZXR1cm4gUHJvbWlzZS5hbGwoW3RoaXMuZ2V0VXNlckluZm8oKSwgdGhpcy5nZXRJbml0aWFsQ2FyZHMoKV0pO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXBcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwRGVsZXRlQ2FyZCBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcih7IHBvcHVwU2VsZWN0b3IgfSkge1xyXG4gICAgc3VwZXIoeyBwb3B1cFNlbGVjdG9yIH0pO1xyXG4gICAgdGhpcy5fcG9wdXBGb3JtID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Zvcm1cIik7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fc2F2ZVwiKTtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblRleHQgPSB0aGlzLl9zdWJtaXRCdXR0b24udGV4dENvbnRlbnQ7XHJcbiAgfVxyXG5cclxuICBoYW5kbGVEZWxldGVDb25maXJtKGNhbGxiYWNrKSB7XHJcbiAgICB0aGlzLl9oYW5kbGVEZWxldGVDb25maXJtID0gY2FsbGJhY2s7XHJcbiAgfVxyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICB0aGlzLl9wb3B1cEZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZSkgPT4ge1xyXG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIHRoaXMuX2hhbmRsZURlbGV0ZUNvbmZpcm0oKTtcclxuICAgIH0pO1xyXG4gIH1cclxuICByZW5kZXJMb2FkaW5nKGlzTG9hZGluZywgbG9hZGluZ1RleHQgPSBcIkRlbGV0aW5nLi4uXCIpIHtcclxuICAgIGlmIChpc0xvYWRpbmcpIHtcclxuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLnRleHRDb250ZW50ID0gbG9hZGluZ1RleHQ7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24udGV4dENvbnRlbnQgPSB0aGlzLl9zdWJtaXRCdXR0b25UZXh0O1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcclxuICAgIHN1cGVyKHsgcG9wdXBTZWxlY3RvciB9KTtcclxuICAgIHRoaXMuX3ByZXZpZXdJbWFnZSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiI3ByZXZpZXctaW1hZ2VcIik7XHJcbiAgICB0aGlzLl9wcmV2aWV3SW1hZ2VUaXRsZSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBcIiNwcmV2aWV3LWltYWdlLXRpdGxlXCJcclxuICAgICk7XHJcbiAgfVxyXG5cclxuICBvcGVuKHsgbmFtZSwgbGluayB9KSB7XHJcbiAgICB0aGlzLl9wcmV2aWV3SW1hZ2Uuc3JjID0gbGluaztcclxuICAgIHRoaXMuX3ByZXZpZXdJbWFnZS5hbHQgPSBuYW1lO1xyXG4gICAgdGhpcy5fcHJldmlld0ltYWdlVGl0bGUudGV4dENvbnRlbnQgPSBuYW1lO1xyXG4gICAgc3VwZXIub3BlbigpO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XHJcbiAgY29uc3RydWN0b3IoeyBuYW1lLCBkZXNjcmlwdGlvbiwgYXZhdGFyIH0pIHtcclxuICAgIHRoaXMuX25hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKG5hbWUpO1xyXG4gICAgdGhpcy5fZGVzY3JpcHRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGRlc2NyaXB0aW9uKTtcclxuICAgIHRoaXMuX2F2YXRhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYXZhdGFyKTtcclxuICB9XHJcblxyXG4gIGdldFVzZXJJbmZvKCkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgbmFtZTogdGhpcy5fbmFtZS50ZXh0Q29udGVudCxcclxuICAgICAgZGVzY3JpcHRpb246IHRoaXMuX2Rlc2NyaXB0aW9uLnRleHRDb250ZW50LFxyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIHNldFVzZXJJbmZvKHsgbmFtZSwgZGVzY3JpcHRpb24gfSkge1xyXG4gICAgdGhpcy5fbmFtZS50ZXh0Q29udGVudCA9IG5hbWU7XHJcbiAgICB0aGlzLl9kZXNjcmlwdGlvbi50ZXh0Q29udGVudCA9IGRlc2NyaXB0aW9uO1xyXG4gIH1cclxuXHJcbiAgc2V0VXNlckF2YXRhcih7IGF2YXRhciB9KSB7XHJcbiAgICB0aGlzLl9hdmF0YXIuc3JjID0gYXZhdGFyO1xyXG4gIH1cclxufVxyXG4iXSwibmFtZXMiOlsib3B0aW9ucyIsImZvcm1TZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwiQ2FyZCIsImNvbnN0cnVjdG9yIiwiZGF0YSIsImNhcmRTZWxlY3RvciIsImhhbmRsZUltYWdlQ2xpY2siLCJoYW5kbGVEZWxldGVDbGljayIsImhhbmRsZUxpa2VDbGljayIsInRoaXMiLCJuYW1lIiwibGluayIsIl9pZCIsIl9pc0xpa2VkIiwiaXNMaWtlZCIsIl91c2VySWQiLCJfY2FyZFNlbGVjdG9yIiwiX2hhbmRsZUltYWdlQ2xpY2siLCJfaGFuZGxlRGVsZXRlQ2xpY2siLCJfaGFuZGxlTGlrZUNsaWNrIiwiX3ByZXZpZXdJbWFnZUVsZW1lbnQiLCJfZ2V0VGVtcGxhdGUiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiX2xpa2VCdXR0b24iLCJfY2FyZEVsZW1lbnQiLCJhZGRFdmVudExpc3RlbmVyIiwiX2RlbGV0ZUJ1dHRvbiIsIl9jYXJkSW1hZ2VFbGVtZW50IiwiaGFuZGxlRGVsZXRlQ2FyZCIsInJlbW92ZSIsImdldElzTGlrZWRTdGF0ZSIsInVwZGF0ZUxpa2VzIiwiY2xhc3NMaXN0IiwiYWRkIiwiZmxpcExpa2VTdGF0ZSIsImdldFZpZXciLCJfY2FyZFRpdGxlRWxlbWVudCIsInNyYyIsImFsdCIsInRleHRDb250ZW50IiwiRm9ybVZhbGlkYXRvciIsImZvcm1FbGVtZW50IiwiX2Zvcm1FbGVtZW50IiwiX2Zvcm1TZWxlY3RvciIsIl9pbnB1dFNlbGVjdG9yIiwiX3N1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiX2luYWN0aXZlQnV0dG9uQ2xhc3MiLCJfaW5wdXRFcnJvckNsYXNzIiwiX2Vycm9yQ2xhc3MiLCJfc2hvd0lucHV0RXJyb3IiLCJpbnB1dEVsZW1lbnQiLCJfZXJyb3JNZXNzYWdlIiwiaWQiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsIl9oaWRlSW5wdXRFcnJvciIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJ2YWxpZGl0eSIsInZhbGlkIiwiX2hhc0ludmFsaWRJbnB1dCIsIl9pbnB1dEVsZW1lbnRzIiwiZXZlcnkiLCJ0b2dnbGVCdXR0b25TdGF0ZSIsIl9kaXNhYmxlU3VibWl0QnV0dG9uIiwiX2VuYWJsZVN1Ym1pdEJ1dHRvbiIsIl9zdWJtaXRCdXR0b24iLCJkaXNhYmxlZCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJmb3JFYWNoIiwiZSIsInJlc2V0Rm9ybSIsImVuYWJsZVZhbGlkYXRpb24iLCJwcmV2ZW50RGVmYXVsdCIsIlBvcHVwIiwiX3JlZiIsInBvcHVwU2VsZWN0b3IiLCJfcG9wdXBTZWxlY3RvciIsIl9wb3B1cEVsZW1lbnQiLCJvcGVuIiwiX2hhbmRsZUVzY0Nsb3NlIiwiY2xvc2UiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwia2V5Iiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJ0YXJnZXQiLCJjb250YWlucyIsIlBvcHVwV2l0aEZvcm0iLCJoYW5kbGVGb3JtU3VibWl0Iiwic3VwZXIiLCJfcG9wdXBGb3JtIiwiX2hhbmRsZUZvcm1TdWJtaXQiLCJfaW5wdXRMaXN0IiwiX3N1Ym1pdEJ1dHRvblRleHQiLCJyZW5kZXJMb2FkaW5nIiwiaXNMb2FkaW5nIiwibG9hZGluZ1RleHQiLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJ1bmRlZmluZWQiLCJfZ2V0SW5wdXRWYWx1ZXMiLCJmb3JtVmFsdWVzIiwidmFsdWUiLCJTZWN0aW9uIiwiY2xhc3NTZWxlY3RvciIsIml0ZW1zIiwicmVuZGVyZXIiLCJfaXRlbSIsIl9yZW5kZXJlciIsIl9jbGFzc1NlY3Rpb24iLCJyZW5kZXJJdGVtcyIsIml0ZW0iLCJhZGRJdGVtIiwiZWxlbWVudCIsInByZXBlbmQiLCJzZXRJdGVtcyIsIl9pdGVtcyIsImNhcmRMaXN0RWxlbWVudCIsInByb2ZpbGVFZGl0Rm9ybSIsInByb2ZpbGVFZGl0QnRuIiwicHJvZmlsZVRpdGxlSW5wdXQiLCJwcm9maWxlRGVzY3JpcHRpb25JbnB1dCIsImVkaXRBdmF0YXJGb3JtIiwiZWRpdEF2YXRhckJ1dHRvbiIsImFkZENhcmRGb3JtIiwiYWRkQ2FyZEJ0biIsImFwaSIsImJhc2VVcmwiLCJoZWFkZXJzIiwiX2Jhc2VVcmwiLCJfaGVhZGVycyIsIl9oYW5kbGVSZXNwb25zZSIsInJlcyIsIm9rIiwianNvbiIsIlByb21pc2UiLCJyZWplY3QiLCJzdGF0dXMiLCJfcmVxdWVzdCIsInVybCIsImZldGNoIiwidGhlbiIsImdldFVzZXJJbmZvIiwiZ2V0SW5pdGlhbENhcmRzIiwidXBkYXRlUHJvZmlsZUluZm8iLCJfcmVmMiIsImRlc2NyaXB0aW9uIiwibWV0aG9kIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJhYm91dCIsImFkZENhcmQiLCJfcmVmMyIsImRlbGV0ZUNhcmQiLCJjYXJkSWQiLCJsaWtlQ2FyZCIsInVubGlrZUNhcmQiLCJ1cGRhdGVQcm9maWxlQXZhdGFyIiwiYXZhdGFyIiwiZ2V0QXBwRGF0YSIsImFsbCIsImF1dGhvcml6YXRpb24iLCJlZGl0UHJvZmlsZVBvcHVwIiwicHJvZmlsZURhdGEiLCJ1c2VySW5mbyIsInNldFVzZXJJbmZvIiwiY2F0Y2giLCJlcnIiLCJjb25zb2xlIiwiZXJyb3IiLCJhbGVydCIsImZpbmFsbHkiLCJlZGl0QXZhdGFyUG9wdXAiLCJzZXRVc2VyQXZhdGFyIiwidXNlcklkIiwibmV3Q2FyZFBvcHVwIiwiaW5wdXRWYWx1ZXMiLCJ0aXRsZSIsIm5ld0NhcmREYXRhIiwiY2FyZFNlY3Rpb24iLCJjcmVhdGVDYXJkIiwicmVzZXQiLCJhZGRDYXJkRm9ybVZhbGlkYXRvciIsImRlbGV0ZUNhcmRQb3B1cCIsImhhbmRsZURlbGV0ZUNvbmZpcm0iLCJjYWxsYmFjayIsIl9oYW5kbGVEZWxldGVDb25maXJtIiwicHJldmlld0ltYWdlUG9wdXAiLCJfcHJldmlld0ltYWdlIiwiX3ByZXZpZXdJbWFnZVRpdGxlIiwidXNlckRhdGEiLCJpbml0aWFsQ2FyZHMiLCJfbmFtZSIsIl9kZXNjcmlwdGlvbiIsIl9hdmF0YXIiLCJoYW5kbGVMaWtlQ2FyZCIsImNhcmQiLCJjYXJkRWxlbWVudCIsInVwZGF0ZWRDYXJkRGF0YSIsInVzZXJJbnB1dCIsImVkaXRBdmF0YXJGb3JtVmFsaWRhdG9yIl0sInNvdXJjZVJvb3QiOiIifQ==