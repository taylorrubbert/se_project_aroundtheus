!function(){"use strict";const e={formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__save",inactiveButtonClass:"modal__button_disabled",inputErrorClass:"modal__input-error",errorClass:"modal__error"};class t{constructor(e,t,s,r,i){this.name=e.name,this.link=e.link,this._id=e._id,this._isLiked=e.isLiked,this._userId=e._userId,this._cardSelector=t,this._handleImageClick=s,this._handleDeleteClick=r,this._handleLikeClick=i,this._previewImageElement=null}_getTemplate(){return document.querySelector(this._cardSelector).content.querySelector(".card__content").cloneNode(!0)}_setEventListeners(){this._likeButton=this._cardElement.querySelector("#like-button"),this._likeButton.addEventListener("click",(()=>this._handleLikeClick(this._id,this))),this._deleteButton=this._cardElement.querySelector("#delete-button").addEventListener("click",(()=>this._handleDeleteClick(this._id,this))),this._cardImageElement=this._cardElement.querySelector("#card-image"),this._cardImageElement.addEventListener("click",(()=>{this._handleImageClick({name:this.name,link:this.link})}))}_handleDeleteCard(){this._cardElement.remove(),this._cardElement=null}getIsLikedState(){return this._isLiked}updateLikes(){this._isLiked?this._likeButton.classList.add("card__like-button_active"):this._likeButton.classList.remove("card__like-button_active")}flipLikeState(){this._isLiked=!this._isLiked}getView(){return this._cardElement=this._getTemplate(),this._likeButton=this._cardElement.querySelector("#like-button"),this._deleteButton=this._cardElement.querySelector("#delete-button"),this._cardImageElement=this._cardElement.querySelector("#card-image"),this._cardTitleElement=this._cardElement.querySelector("#card-title"),this.updateLikes(),this._cardImageElement.src=this.link,this._cardImageElement.alt=this.name,this._cardTitleElement.textContent=this.name,this._setEventListeners(),this._cardElement}}class s{constructor(e,t){this._formElement=t,this._formSelector=e.formSelector,this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass}_showInputError(e){this._errorMessage=this._formElement.querySelector(`#${e.id}-error`),e.classList.add(this._inputErrorClass),this._errorMessage.textContent=e.validationMessage,this._errorMessage.classList.add(this._errorClass)}_hideInputError(e){this._errorMessage=this._formElement.querySelector(`#${e.id}-error`),e.classList.remove(this._inputErrorClass),this._errorMessage.textContent="",this._errorMessage.classList.add(this._errorClass)}_checkInputValidity(e){if(!e.validity.valid)return this._showInputError(e);this._hideInputError(e)}_hasInvalidInput(){return!this._inputElements.every((e=>e.validity.valid))}toggleButtonState(){this._hasInvalidInput()?this._disableSubmitButton():this._enableSubmitButton()}_enableSubmitButton(){this._submitButton.classList.remove(this._inactiveButtonClass),this._submitButton.disabled=!1}_disableSubmitButton(){this._submitButton.classList.add(this._inactiveButtonClass),this._submitButton.disabled=!0}_setEventListeners(){this._inputElements=[...this._formElement.querySelectorAll(this._inputSelector)],this._submitButton=this._formElement.querySelector(this._submitButtonSelector),this._inputElements.forEach((e=>{e.addEventListener("input",(t=>{this._checkInputValidity(e),this.toggleButtonState()}))}))}resetForm(){this._inputElements.forEach((e=>this._hideInputError(e))),this._disableSubmitButton()}enableValidation(e){this._formElement.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}}class r{constructor(e){let{popupSelector:t}=e;this._popupSelector=t,this._popupElement=document.querySelector(t)}open(){this._popupElement.classList.add("modal_opened"),document.addEventListener("keydown",this._handleEscClose)}close(){this._popupElement.classList.remove("modal_opened"),document.removeEventListener("keydown",this._handleEscClose)}_handleEscClose=e=>{"Escape"===e.key&&this.close()};setEventListeners(){this._popupElement.querySelector(".modal__close").addEventListener("click",(()=>{this.close()})),this._popupElement.addEventListener("mousedown",(e=>{e.target.classList.contains("modal_opened")&&this.close()}))}}class i extends r{constructor(e,t){super({popupSelector:e}),this._popupForm=this._popupElement.querySelector(".modal__form"),this._handleFormSubmit=t,this._inputList=[...this._popupForm.querySelectorAll(".modal__input")],this._submitButton=this._popupElement.querySelector(".modal__save"),this._submitButtonText=this._submitButton.textContent}renderLoading(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Saving...";this._submitButton.textContent=e?t:this._submitButtonText}_getInputValues(){const e={};return this._inputList.forEach((t=>{e[t.name]=t.value})),e}setEventListeners(){super.setEventListeners(),this._popupForm.addEventListener("submit",(e=>{e.preventDefault(),this._handleFormSubmit(this._getInputValues()),this._popupForm.reset()}))}}class n{constructor(e,t){let{items:s,renderer:r}=e;this._item=s,this._renderer=r,this._classSection=t}renderItems(){this._item.forEach((e=>{this._renderer(e)}))}addItem(e){this._classSection.prepend(e)}setItems(e){this._items=e}}const o=document.querySelector(".card__list"),a=document.querySelector("#profile-edit-modal").querySelector(".modal__form"),l=document.querySelector("#profile-edit-btn"),d=document.querySelector("#profile-title-input"),h=document.querySelector("#profile-description-input"),c=document.querySelector("#edit-avatar-form"),u=document.querySelector(".profile__avatar-edit-button"),_=document.querySelector("#add-card-modal").querySelector(".modal__form"),m=document.querySelector(".profile__add-button"),p=new class{constructor(e){let{baseUrl:t,headers:s}=e;this._baseUrl=t,this._headers=s}_handleResponse(e){return e.ok?e.json():Promise.reject(`Error ${e.status}`)}_request(e,t){return fetch(e,t).then(this._handleResponse)}getUserInfo(){return fetch(`${this._baseUrl}/users/me`,{headers:this._headers}).then(this._handleResponse)}getInitialCards(){return fetch(`${this._baseUrl}/cards`,{headers:this._headers}).then(this._handleResponse)}updateProfileInfo(e){let{name:t,description:s}=e;return fetch(`${this._baseUrl}/users/me`,{method:"PATCH",headers:this._headers,body:JSON.stringify({name:t,about:s})}).then(this._handleResponse)}addCard(e){let{name:t,link:s}=e;return fetch(`${this._baseUrl}/cards`,{method:"POST",headers:this._headers,body:JSON.stringify({name:t,link:s})}).then(this._handleResponse)}deleteCard(e){return fetch(`${this._baseUrl}/cards/${e}`,{method:"DELETE",headers:this._headers}).then(this._handleResponse)}likeCard(e){return fetch(`${this._baseUrl}/cards/${e}/likes`,{method:"PUT",headers:this._headers}).then(this._handleResponse)}unlikeCard(e){return fetch(`${this._baseUrl}/cards/${e}/likes`,{method:"DELETE",headers:this._headers}).then(this._handleResponse)}updateProfileAvatar(e){return fetch(`${this._baseUrl}/users/me/avatar`,{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:e})}).then(this._handleResponse)}getAppData(){return Promise.all([this.getUserInfo(),this.getInitialCards()])}}({baseUrl:"https://around-api.en.tripleten-services.com/v1",headers:{authorization:"9d8df36b-440d-4bca-949a-3193d9385b7e","Content-Type":"application/json"}}),E=new i("#profile-edit-modal",(function(e){E.renderLoading(!0),p.updateProfileInfo(e).then((()=>{const t=e.name,s=e.description;k.setUserInfo({name:t,description:s}),E.close()})).catch((e=>{console.error(e),alert(`${e}, Could not update user info!`)})).finally((()=>{E.renderLoading(!1)}))}));E.setEventListeners();const v=new i("#avatar-edit-modal",(function(e){v.renderLoading(!0),p.updateProfileAvatar(e.url).then((e=>{k.setUserAvatar(e),v.close()})).catch(console.error).finally((()=>{v.renderLoading(!1)}))}));let f;v.setEventListeners();const S=new i("#add-card-modal",(function(e){S.renderLoading(!0),p.addCard({name:e.title,link:e.url}).then((e=>{g.addItem(C(e)),_.reset(),S.close(),q.resetForm()})).catch(console.error).finally((()=>{S.renderLoading(!1)}))}));S.setEventListeners();const L=new class extends r{constructor(e){let{popupSelector:t}=e;super({popupSelector:t}),this._popupForm=this._popupElement.querySelector(".modal__form"),this._submitButton=this._popupElement.querySelector(".modal__save"),this._submitButtonText=this._submitButton.textContent}handleDeleteConfirm(e){this._handleDeleteConfirm=e}setEventListeners(){super.setEventListeners(),this._popupForm.addEventListener("submit",(e=>{e.preventDefault(),this._handleDeleteConfirm()}))}renderLoading(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Deleting...";this._submitButton.textContent=e?t:this._submitButtonText}}({popupSelector:"#delete-card-modal"});L.setEventListeners();const b=new class extends r{constructor(e){super({popupSelector:e}),this._previewImage=this._popupElement.querySelector("#preview-image"),this._previewImageTitle=this._popupElement.querySelector("#preview-image-title")}open(e){let{name:t,link:s}=e;this._previewImage.src=s,this._previewImage.alt=t,this._previewImageTitle.textContent=t,super.open()}}("#preview-modal");let g;b.setEventListeners(),p.getAppData().then((e=>{let[t,s]=e;k.setUserInfo({name:t.name,description:t.about}),k.setUserAvatar({avatar:t.avatar}),f=t._id,g=new n({items:s,renderer:e=>{g.addItem(C(e))}},o),g.renderItems()})).catch(console.error);const k=new class{constructor(e){let{name:t,description:s,avatar:r}=e;this._name=document.querySelector(t),this._description=document.querySelector(s),this._avatar=document.querySelector(r)}getUserInfo(){return{name:this._name.textContent,description:this._description.textContent}}setUserInfo(e){let{name:t,description:s}=e;this._name.textContent=t,this._description.textContent=s}setUserAvatar(e){let{avatar:t}=e;this._avatar.src=t}}({name:".profile__title",description:".profile__description",avatar:".profile__image"});function C(e){return new t(e,"#card-template",y,I,B).getView()}function y(e,t){b.open(e,t)}function I(e,t){L.open(),L.handleDeleteConfirm((()=>{L.renderLoading(!0),p.deleteCard(e).then((()=>{I(),t._handleDeleteCard(),L.close()})).catch(console.error).finally((()=>{L.renderLoading(!1)}))}))}function B(e,t){t.getIsLikedState()?p.unlikeCard(e).then((e=>{t.flipLikeState(),t.updateLikes(e.isLiked)})).catch(console.error):p.likeCard(e).then((e=>{t.flipLikeState(),t.updateLikes(e.isLiked)})).catch(console.error)}l.addEventListener("click",(()=>{const e=k.getUserInfo();d.value=e.name,h.value=e.description,E.open()})),u.addEventListener("click",(()=>{v.open(),w.resetForm()})),m.addEventListener("click",(()=>{S.open(),q.toggleButtonState()}));const q=new s(e,_);q.enableValidation(),new s(e,a).enableValidation();const w=new s(e,c);w.enableValidation()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QWdCMUYsZUFBYyxHQUM5QmlDLEVBQ0c0QixXQUFXQyxHQUNYZCxNQUFLLEtBQ0pzRCxJQUNBRSxFQUFLeEssb0JBQ0wwSixFQUFnQnZHLE9BQU8sSUFFeEJ1RixNQUFNRSxRQUFRQyxPQUNkRSxTQUFRLEtBQ1BXLEVBQWdCMUYsZUFBYyxFQUFNLEdBQ3BDLEdBRVIsQ0FFQSxTQUFTdUcsRUFBZXpDLEVBQVEyQyxHQUMxQkEsRUFBWXZLLGtCQUNkK0YsRUFDRytCLFdBQVdGLEdBQ1hkLE1BQU0wRCxJQUNMRCxFQUFZbkssZ0JBQ1ptSyxFQUFZdEssWUFBWXVLLEVBQWdCNUwsUUFBUSxJQUVqRDRKLE1BQU1FLFFBQVFDLE9BRWpCNUMsRUFDRzhCLFNBQVNELEdBQ1RkLE1BQU0wRCxJQUNMRCxFQUFZbkssZ0JBQ1ptSyxFQUFZdEssWUFBWXVLLEVBQWdCNUwsUUFBUSxJQUVqRDRKLE1BQU1FLFFBQVFDLE1BRXJCLENBS0FuRCxFQUFlN0YsaUJBQWlCLFNBQVMsS0FDdkMsTUFBTThLLEVBQVluQyxFQUFTdkIsY0FDM0J0QixFQUFrQm5CLE1BQVFtRyxFQUFVak0sS0FDcENrSCxFQUF3QnBCLE1BQVFtRyxFQUFVdEQsWUFDMUNpQixFQUFpQnJGLE1BQU0sSUFJekI2QyxFQUFpQmpHLGlCQUFpQixTQUFTLEtBQ3pDbUosRUFBZ0IvRixPQUNoQjJILEVBQXdCbkksV0FBVyxJQUlyQ3VELEVBQVduRyxpQkFBaUIsU0FBUyxLQUNuQ3NKLEVBQWFsRyxPQUNid0csRUFBcUJ4SCxtQkFBbUIsSUFNMUMsTUFBTXdILEVBQXVCLElBQUk3SSxFQUFjakQsRUFBU29JLEdBQ3hEMEQsRUFBcUIvRyxtQkFFWSxJQUFJOUIsRUFBY2pELEVBQVM4SCxHQUNuQy9DLG1CQUV6QixNQUFNa0ksRUFBMEIsSUFBSWhLLEVBQWNqRCxFQUFTa0ksR0FDM0QrRSxFQUF3QmxJLGtCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy91dGlscy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvcGFnZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL0FQSS5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBEZWxldGVDYXJkLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLy4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNvbnN0IGluaXRpYWxDYXJkcyA9IFtcclxuICB7XHJcbiAgICBuYW1lOiBcIllvc2VtaXRlIFZhbGxleVwiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L3lvc2VtaXRlLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJMYWtlIExvdWlzZVwiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xha2UtbG91aXNlLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJCYWxkIE1vdW50YWluc1wiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2JhbGQtbW91bnRhaW5zLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJMYXRlbWFyXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGF0ZW1hci5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiVmFub2lzZSBOYXRpb25hbCBQYXJrXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvdmFub2lzZS5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiTGFnbyBkaSBCcmFpZXNcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9sYWdvLmpwZ1wiLFxyXG4gIH0sXHJcbl07XHJcblxyXG5leHBvcnQgY29uc3Qgb3B0aW9ucyA9IHtcclxuICBmb3JtU2VsZWN0b3I6IFwiLm1vZGFsX19mb3JtXCIsXHJcbiAgaW5wdXRTZWxlY3RvcjogXCIubW9kYWxfX2lucHV0XCIsXHJcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLm1vZGFsX19zYXZlXCIsXHJcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJtb2RhbF9fYnV0dG9uX2Rpc2FibGVkXCIsXHJcbiAgaW5wdXRFcnJvckNsYXNzOiBcIm1vZGFsX19pbnB1dC1lcnJvclwiLFxyXG4gIGVycm9yQ2xhc3M6IFwibW9kYWxfX2Vycm9yXCIsXHJcbn07XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcmQge1xyXG4gIGNvbnN0cnVjdG9yKFxyXG4gICAgZGF0YSxcclxuICAgIGNhcmRTZWxlY3RvcixcclxuICAgIGhhbmRsZUltYWdlQ2xpY2ssXHJcbiAgICBoYW5kbGVEZWxldGVDbGljayxcclxuICAgIGhhbmRsZUxpa2VDbGlja1xyXG4gICkge1xyXG4gICAgdGhpcy5uYW1lID0gZGF0YS5uYW1lO1xyXG4gICAgdGhpcy5saW5rID0gZGF0YS5saW5rO1xyXG4gICAgdGhpcy5faWQgPSBkYXRhLl9pZDtcclxuICAgIHRoaXMuX2lzTGlrZWQgPSBkYXRhLmlzTGlrZWQ7XHJcbiAgICB0aGlzLl91c2VySWQgPSBkYXRhLl91c2VySWQ7XHJcbiAgICB0aGlzLl9jYXJkU2VsZWN0b3IgPSBjYXJkU2VsZWN0b3I7XHJcbiAgICB0aGlzLl9oYW5kbGVJbWFnZUNsaWNrID0gaGFuZGxlSW1hZ2VDbGljaztcclxuICAgIHRoaXMuX2hhbmRsZURlbGV0ZUNsaWNrID0gaGFuZGxlRGVsZXRlQ2xpY2s7XHJcbiAgICB0aGlzLl9oYW5kbGVMaWtlQ2xpY2sgPSBoYW5kbGVMaWtlQ2xpY2s7XHJcbiAgICB0aGlzLl9wcmV2aWV3SW1hZ2VFbGVtZW50ID0gbnVsbDtcclxuICB9XHJcblxyXG4gIF9nZXRUZW1wbGF0ZSgpIHtcclxuICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gZG9jdW1lbnRcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IodGhpcy5fY2FyZFNlbGVjdG9yKVxyXG4gICAgICAuY29udGVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2NvbnRlbnRcIilcclxuICAgICAgLmNsb25lTm9kZSh0cnVlKTtcclxuICAgIHJldHVybiBjYXJkRWxlbWVudDtcclxuICB9XHJcblxyXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX2xpa2VCdXR0b24gPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiI2xpa2UtYnV0dG9uXCIpO1xyXG4gICAgdGhpcy5fbGlrZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT5cclxuICAgICAgdGhpcy5faGFuZGxlTGlrZUNsaWNrKHRoaXMuX2lkLCB0aGlzKVxyXG4gICAgKTtcclxuXHJcbiAgICB0aGlzLl9kZWxldGVCdXR0b24gPSB0aGlzLl9jYXJkRWxlbWVudFxyXG4gICAgICAucXVlcnlTZWxlY3RvcihcIiNkZWxldGUtYnV0dG9uXCIpXHJcbiAgICAgIC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gdGhpcy5faGFuZGxlRGVsZXRlQ2xpY2sodGhpcy5faWQsIHRoaXMpKTtcclxuXHJcbiAgICB0aGlzLl9jYXJkSW1hZ2VFbGVtZW50ID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIiNjYXJkLWltYWdlXCIpO1xyXG4gICAgdGhpcy5fY2FyZEltYWdlRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICB0aGlzLl9oYW5kbGVJbWFnZUNsaWNrKHtcclxuICAgICAgICBuYW1lOiB0aGlzLm5hbWUsXHJcbiAgICAgICAgbGluazogdGhpcy5saW5rLFxyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgX2hhbmRsZURlbGV0ZUNhcmQoKSB7XHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudC5yZW1vdmUoKTtcclxuICAgIHRoaXMuX2NhcmRFbGVtZW50ID0gbnVsbDtcclxuICB9XHJcblxyXG4gIGdldElzTGlrZWRTdGF0ZSgpIHtcclxuICAgIHJldHVybiB0aGlzLl9pc0xpa2VkO1xyXG4gIH1cclxuXHJcbiAgdXBkYXRlTGlrZXMoKSB7XHJcbiAgICBpZiAodGhpcy5faXNMaWtlZCkge1xyXG4gICAgICB0aGlzLl9saWtlQnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJjYXJkX19saWtlLWJ1dHRvbl9hY3RpdmVcIik7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9saWtlQnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoXCJjYXJkX19saWtlLWJ1dHRvbl9hY3RpdmVcIik7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBmbGlwTGlrZVN0YXRlKCkge1xyXG4gICAgdGhpcy5faXNMaWtlZCA9ICF0aGlzLl9pc0xpa2VkO1xyXG4gIH1cclxuXHJcbiAgZ2V0VmlldygpIHtcclxuICAgIHRoaXMuX2NhcmRFbGVtZW50ID0gdGhpcy5fZ2V0VGVtcGxhdGUoKTtcclxuICAgIHRoaXMuX2xpa2VCdXR0b24gPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiI2xpa2UtYnV0dG9uXCIpO1xyXG4gICAgdGhpcy5fZGVsZXRlQnV0dG9uID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIiNkZWxldGUtYnV0dG9uXCIpO1xyXG4gICAgdGhpcy5fY2FyZEltYWdlRWxlbWVudCA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjY2FyZC1pbWFnZVwiKTtcclxuICAgIHRoaXMuX2NhcmRUaXRsZUVsZW1lbnQgPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiI2NhcmQtdGl0bGVcIik7XHJcblxyXG4gICAgdGhpcy51cGRhdGVMaWtlcygpO1xyXG4gICAgdGhpcy5fY2FyZEltYWdlRWxlbWVudC5zcmMgPSB0aGlzLmxpbms7XHJcbiAgICB0aGlzLl9jYXJkSW1hZ2VFbGVtZW50LmFsdCA9IHRoaXMubmFtZTtcclxuICAgIHRoaXMuX2NhcmRUaXRsZUVsZW1lbnQudGV4dENvbnRlbnQgPSB0aGlzLm5hbWU7XHJcblxyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIHJldHVybiB0aGlzLl9jYXJkRWxlbWVudDtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgRm9ybVZhbGlkYXRvciB7XHJcbiAgY29uc3RydWN0b3Iob3B0aW9ucywgZm9ybUVsZW1lbnQpIHtcclxuICAgIHRoaXMuX2Zvcm1FbGVtZW50ID0gZm9ybUVsZW1lbnQ7XHJcbiAgICB0aGlzLl9mb3JtU2VsZWN0b3IgPSBvcHRpb25zLmZvcm1TZWxlY3RvcjtcclxuICAgIHRoaXMuX2lucHV0U2VsZWN0b3IgPSBvcHRpb25zLmlucHV0U2VsZWN0b3I7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvciA9IG9wdGlvbnMuc3VibWl0QnV0dG9uU2VsZWN0b3I7XHJcbiAgICB0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzID0gb3B0aW9ucy5pbmFjdGl2ZUJ1dHRvbkNsYXNzO1xyXG4gICAgdGhpcy5faW5wdXRFcnJvckNsYXNzID0gb3B0aW9ucy5pbnB1dEVycm9yQ2xhc3M7XHJcbiAgICB0aGlzLl9lcnJvckNsYXNzID0gb3B0aW9ucy5lcnJvckNsYXNzO1xyXG4gIH1cclxuXHJcbiAgX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCkge1xyXG4gICAgdGhpcy5fZXJyb3JNZXNzYWdlID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgYCMke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgXHJcbiAgICApO1xyXG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcclxuICAgIHRoaXMuX2Vycm9yTWVzc2FnZS50ZXh0Q29udGVudCA9IGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZTtcclxuICAgIHRoaXMuX2Vycm9yTWVzc2FnZS5jbGFzc0xpc3QuYWRkKHRoaXMuX2Vycm9yQ2xhc3MpO1xyXG4gIH1cclxuXHJcbiAgX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCkge1xyXG4gICAgdGhpcy5fZXJyb3JNZXNzYWdlID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgYCMke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgXHJcbiAgICApO1xyXG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcclxuICAgIHRoaXMuX2Vycm9yTWVzc2FnZS50ZXh0Q29udGVudCA9IFwiXCI7XHJcbiAgICB0aGlzLl9lcnJvck1lc3NhZ2UuY2xhc3NMaXN0LmFkZCh0aGlzLl9lcnJvckNsYXNzKTtcclxuICB9XHJcblxyXG4gIF9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KSB7XHJcbiAgICBpZiAoIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCkge1xyXG4gICAgICByZXR1cm4gdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcclxuICAgIH1cclxuICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XHJcbiAgfVxyXG5cclxuICBfaGFzSW52YWxpZElucHV0KCkge1xyXG4gICAgcmV0dXJuICF0aGlzLl9pbnB1dEVsZW1lbnRzLmV2ZXJ5KFxyXG4gICAgICAoaW5wdXRFbGVtZW50KSA9PiBpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWRcclxuICAgICk7XHJcbiAgfVxyXG5cclxuICB0b2dnbGVCdXR0b25TdGF0ZSgpIHtcclxuICAgIGlmICh0aGlzLl9oYXNJbnZhbGlkSW5wdXQoKSkge1xyXG4gICAgICB0aGlzLl9kaXNhYmxlU3VibWl0QnV0dG9uKCk7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIHRoaXMuX2VuYWJsZVN1Ym1pdEJ1dHRvbigpO1xyXG4gIH1cclxuXHJcbiAgX2VuYWJsZVN1Ym1pdEJ1dHRvbigpIHtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLmRpc2FibGVkID0gZmFsc2U7XHJcbiAgfVxyXG5cclxuICBfZGlzYWJsZVN1Ym1pdEJ1dHRvbigpIHtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QuYWRkKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcclxuICB9XHJcblxyXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX2lucHV0RWxlbWVudHMgPSBbXHJcbiAgICAgIC4uLnRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5faW5wdXRTZWxlY3RvciksXHJcbiAgICBdO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3JcclxuICAgICk7XHJcblxyXG4gICAgdGhpcy5faW5wdXRFbGVtZW50cy5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgICAgaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoZSkgPT4ge1xyXG4gICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpO1xyXG4gICAgICAgIHRoaXMudG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9XHJcbiAgcmVzZXRGb3JtKCkge1xyXG4gICAgdGhpcy5faW5wdXRFbGVtZW50cy5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+XHJcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudClcclxuICAgICk7XHJcbiAgICB0aGlzLl9kaXNhYmxlU3VibWl0QnV0dG9uKCk7XHJcbiAgfVxyXG5cclxuICBlbmFibGVWYWxpZGF0aW9uKG9wdGlvbnMpIHtcclxuICAgIHRoaXMuX2Zvcm1FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGUpID0+IHtcclxuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHsgcG9wdXBTZWxlY3RvciB9KSB7XHJcbiAgICB0aGlzLl9wb3B1cFNlbGVjdG9yID0gcG9wdXBTZWxlY3RvcjtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3Rvcik7XHJcbiAgfVxyXG5cclxuICBvcGVuKCkge1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJtb2RhbF9vcGVuZWRcIik7XHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcbiAgfVxyXG5cclxuICBjbG9zZSgpIHtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwibW9kYWxfb3BlbmVkXCIpO1xyXG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG4gIH1cclxuXHJcbiAgX2hhbmRsZUVzY0Nsb3NlID0gKGUpID0+IHtcclxuICAgIGlmIChlLmtleSA9PT0gXCJFc2NhcGVcIikge1xyXG4gICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICBjb25zdCBjbG9zZUJ1dHRvbiA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19jbG9zZVwiKTtcclxuICAgIGNsb3NlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH0pO1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgKGUpID0+IHtcclxuICAgICAgaWYgKGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcIm1vZGFsX29wZW5lZFwiKSkge1xyXG4gICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yLCBoYW5kbGVGb3JtU3VibWl0KSB7XHJcbiAgICBzdXBlcih7IHBvcHVwU2VsZWN0b3IgfSk7XHJcbiAgICB0aGlzLl9wb3B1cEZvcm0gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybVwiKTtcclxuICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQgPSBoYW5kbGVGb3JtU3VibWl0O1xyXG4gICAgdGhpcy5faW5wdXRMaXN0ID0gWy4uLnRoaXMuX3BvcHVwRm9ybS5xdWVyeVNlbGVjdG9yQWxsKFwiLm1vZGFsX19pbnB1dFwiKV07XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fc2F2ZVwiKTtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblRleHQgPSB0aGlzLl9zdWJtaXRCdXR0b24udGV4dENvbnRlbnQ7XHJcbiAgfVxyXG5cclxuICByZW5kZXJMb2FkaW5nKGlzTG9hZGluZywgbG9hZGluZ1RleHQgPSBcIlNhdmluZy4uLlwiKSB7XHJcbiAgICBpZiAoaXNMb2FkaW5nKSB7XHJcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudCA9IGxvYWRpbmdUZXh0O1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLnRleHRDb250ZW50ID0gdGhpcy5fc3VibWl0QnV0dG9uVGV4dDtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIF9nZXRJbnB1dFZhbHVlcygpIHtcclxuICAgIGNvbnN0IGZvcm1WYWx1ZXMgPSB7fTtcclxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgICAgZm9ybVZhbHVlc1tpbnB1dEVsZW1lbnQubmFtZV0gPSBpbnB1dEVsZW1lbnQudmFsdWU7XHJcbiAgICB9KTtcclxuXHJcbiAgICByZXR1cm4gZm9ybVZhbHVlcztcclxuICB9XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbiAgICB0aGlzLl9wb3B1cEZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZSkgPT4ge1xyXG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQodGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKSk7XHJcbiAgICAgIHRoaXMuX3BvcHVwRm9ybS5yZXNldCgpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlY3Rpb24ge1xyXG4gIGNvbnN0cnVjdG9yKHsgaXRlbXMsIHJlbmRlcmVyIH0sIGNsYXNzU2VsZWN0b3IpIHtcclxuICAgIHRoaXMuX2l0ZW0gPSBpdGVtcztcclxuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XHJcbiAgICB0aGlzLl9jbGFzc1NlY3Rpb24gPSBjbGFzc1NlbGVjdG9yO1xyXG4gIH1cclxuXHJcbiAgcmVuZGVySXRlbXMoKSB7XHJcbiAgICB0aGlzLl9pdGVtLmZvckVhY2goKGl0ZW0pID0+IHtcclxuICAgICAgdGhpcy5fcmVuZGVyZXIoaXRlbSk7XHJcbiAgICB9KTtcclxuICB9XHJcbiAgYWRkSXRlbShlbGVtZW50KSB7XHJcbiAgICB0aGlzLl9jbGFzc1NlY3Rpb24ucHJlcGVuZChlbGVtZW50KTtcclxuICB9XHJcblxyXG4gIHNldEl0ZW1zKGl0ZW1zKSB7XHJcbiAgICB0aGlzLl9pdGVtcyA9IGl0ZW1zO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgXCIuLi9wYWdlcy9pbmRleC5jc3NcIjtcclxuaW1wb3J0IHsgaW5pdGlhbENhcmRzLCBvcHRpb25zIH0gZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xyXG5pbXBvcnQgQ2FyZCBmcm9tIFwiLi4vY29tcG9uZW50cy9DYXJkLmpzXCI7XHJcbmltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gXCIuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanNcIjtcclxuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qc1wiO1xyXG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanNcIjtcclxuaW1wb3J0IFNlY3Rpb24gZnJvbSBcIi4uL2NvbXBvbmVudHMvU2VjdGlvbi5qc1wiO1xyXG5pbXBvcnQgVXNlckluZm8gZnJvbSBcIi4uL2NvbXBvbmVudHMvVXNlckluZm8uanNcIjtcclxuaW1wb3J0IEFwaSBmcm9tIFwiLi4vY29tcG9uZW50cy9BUEkuanNcIjtcclxuaW1wb3J0IFBvcHVwRGVsZXRlQ2FyZCBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cERlbGV0ZUNhcmQuanNcIjtcclxuXHJcbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXHJcbi8qICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEVsZW1lbnRzICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICovXHJcbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXHJcbi8vVGVtcGxhdGVzXHJcbmNvbnN0IGNhcmRMaXN0RWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fbGlzdFwiKTtcclxuXHJcbi8vRWRpdCBQcm9maWxlXHJcbmNvbnN0IHByb2ZpbGVFZGl0TW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtZWRpdC1tb2RhbFwiKTtcclxuY29uc3QgcHJvZmlsZUVkaXRGb3JtID0gcHJvZmlsZUVkaXRNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19mb3JtXCIpO1xyXG5jb25zdCBwcm9maWxlRWRpdEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1lZGl0LWJ0blwiKTtcclxuY29uc3QgcHJvZmlsZVRpdGxlSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtdGl0bGUtaW5wdXRcIik7XHJcbmNvbnN0IHByb2ZpbGVEZXNjcmlwdGlvbklucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcclxuICBcIiNwcm9maWxlLWRlc2NyaXB0aW9uLWlucHV0XCJcclxuKTtcclxuXHJcbi8vRWRpdCBBdmF0YXJcclxuY29uc3QgZWRpdEF2YXRhckZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2VkaXQtYXZhdGFyLWZvcm1cIik7XHJcbmNvbnN0IGVkaXRBdmF0YXJCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2F2YXRhci1lZGl0LWJ1dHRvblwiKTtcclxuXHJcbi8vQWRkIE5ldyBDYXJkXHJcbmNvbnN0IGFkZENhcmRNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjYWRkLWNhcmQtbW9kYWxcIik7XHJcbmNvbnN0IGFkZENhcmRGb3JtID0gYWRkQ2FyZE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Zvcm1cIik7XHJcbmNvbnN0IGFkZENhcmRCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2FkZC1idXR0b25cIik7XHJcblxyXG4vL0FQSVxyXG5jb25zdCBhcGkgPSBuZXcgQXBpKHtcclxuICBiYXNlVXJsOiBcImh0dHBzOi8vYXJvdW5kLWFwaS5lbi50cmlwbGV0ZW4tc2VydmljZXMuY29tL3YxXCIsXHJcbiAgaGVhZGVyczoge1xyXG4gICAgYXV0aG9yaXphdGlvbjogXCI5ZDhkZjM2Yi00NDBkLTRiY2EtOTQ5YS0zMTkzZDkzODViN2VcIixcclxuICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxyXG4gIH0sXHJcbn0pO1xyXG5cclxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxuLyogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUG9wdXBzICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cclxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxuLy9FZGl0IFByb2ZpbGUgUG9wdXBcclxuY29uc3QgZWRpdFByb2ZpbGVQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKFxyXG4gIFwiI3Byb2ZpbGUtZWRpdC1tb2RhbFwiLFxyXG4gIGhhbmRsZVByb2ZpbGVFZGl0U3VibWl0XHJcbik7XHJcbmVkaXRQcm9maWxlUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbi8vRWRpdCBBdmF0YXIgUG9wdXBcclxuY29uc3QgZWRpdEF2YXRhclBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oXHJcbiAgXCIjYXZhdGFyLWVkaXQtbW9kYWxcIixcclxuICBoYW5kbGVOZXdBdmF0YXJTdWJtaXRcclxuKTtcclxuZWRpdEF2YXRhclBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbmxldCB1c2VySWQ7XHJcblxyXG4vL0FkZCBOZXcgQ2FyZCBQb3B1cFxyXG5jb25zdCBuZXdDYXJkUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybShcIiNhZGQtY2FyZC1tb2RhbFwiLCBoYW5kbGVBZGRDYXJkU3VibWl0KTtcclxubmV3Q2FyZFBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG4vL0RlZWx0ZSBDYXJkIFBvcHVwXHJcbmNvbnN0IGRlbGV0ZUNhcmRQb3B1cCA9IG5ldyBQb3B1cERlbGV0ZUNhcmQoe1xyXG4gIHBvcHVwU2VsZWN0b3I6IFwiI2RlbGV0ZS1jYXJkLW1vZGFsXCIsXHJcbn0pO1xyXG5kZWxldGVDYXJkUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbi8vUHJldmlldyBJbWFnZSBQb3B1cFxyXG5jb25zdCBwcmV2aWV3SW1hZ2VQb3B1cCA9IG5ldyBQb3B1cFdpdGhJbWFnZShcIiNwcmV2aWV3LW1vZGFsXCIpO1xyXG5wcmV2aWV3SW1hZ2VQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuLy9TZWN0aW9uXHJcbmxldCBjYXJkU2VjdGlvbjtcclxuYXBpXHJcbiAgLmdldEFwcERhdGEoKVxyXG4gIC50aGVuKChbdXNlckRhdGEsIGluaXRpYWxDYXJkc10pID0+IHtcclxuICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKHtcclxuICAgICAgbmFtZTogdXNlckRhdGEubmFtZSxcclxuICAgICAgZGVzY3JpcHRpb246IHVzZXJEYXRhLmFib3V0LFxyXG4gICAgfSk7XHJcbiAgICB1c2VySW5mby5zZXRVc2VyQXZhdGFyKHsgYXZhdGFyOiB1c2VyRGF0YS5hdmF0YXIgfSk7XHJcbiAgICB1c2VySWQgPSB1c2VyRGF0YS5faWQ7XHJcblxyXG4gICAgY2FyZFNlY3Rpb24gPSBuZXcgU2VjdGlvbihcclxuICAgICAge1xyXG4gICAgICAgIGl0ZW1zOiBpbml0aWFsQ2FyZHMsXHJcbiAgICAgICAgcmVuZGVyZXI6IChpdGVtKSA9PiB7XHJcbiAgICAgICAgICBjYXJkU2VjdGlvbi5hZGRJdGVtKGNyZWF0ZUNhcmQoaXRlbSkpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgIH0sXHJcbiAgICAgIGNhcmRMaXN0RWxlbWVudFxyXG4gICAgKTtcclxuICAgIGNhcmRTZWN0aW9uLnJlbmRlckl0ZW1zKCk7XHJcbiAgfSlcclxuICAuY2F0Y2goY29uc29sZS5lcnJvcik7XHJcblxyXG4vL1VzZXJJbmZvXHJcbmNvbnN0IHVzZXJJbmZvID0gbmV3IFVzZXJJbmZvKHtcclxuICBuYW1lOiBcIi5wcm9maWxlX190aXRsZVwiLFxyXG4gIGRlc2NyaXB0aW9uOiBcIi5wcm9maWxlX19kZXNjcmlwdGlvblwiLFxyXG4gIGF2YXRhcjogXCIucHJvZmlsZV9faW1hZ2VcIixcclxufSk7XHJcblxyXG4vL0NyZWF0ZSBDYXJkXHJcbmZ1bmN0aW9uIGNyZWF0ZUNhcmQoZGF0YSkge1xyXG4gIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZChcclxuICAgIGRhdGEsXHJcbiAgICBcIiNjYXJkLXRlbXBsYXRlXCIsXHJcbiAgICBoYW5kbGVJbWFnZUNsaWNrLFxyXG4gICAgaGFuZGxlRGVsZXRlQ2FyZCxcclxuICAgIGhhbmRsZUxpa2VDYXJkXHJcbiAgKTtcclxuICByZXR1cm4gY2FyZC5nZXRWaWV3KCk7XHJcbn1cclxuXHJcbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXHJcbi8qICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEZ1bmN0aW9ucyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICovXHJcbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXHJcbmZ1bmN0aW9uIGhhbmRsZUltYWdlQ2xpY2sobmFtZSwgbGluaykge1xyXG4gIHByZXZpZXdJbWFnZVBvcHVwLm9wZW4obmFtZSwgbGluayk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZVByb2ZpbGVFZGl0U3VibWl0KHByb2ZpbGVEYXRhKSB7XHJcbiAgZWRpdFByb2ZpbGVQb3B1cC5yZW5kZXJMb2FkaW5nKHRydWUpO1xyXG4gIGFwaVxyXG4gICAgLnVwZGF0ZVByb2ZpbGVJbmZvKHByb2ZpbGVEYXRhKVxyXG4gICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICBjb25zdCBuYW1lID0gcHJvZmlsZURhdGEubmFtZTtcclxuICAgICAgY29uc3QgZGVzY3JpcHRpb24gPSBwcm9maWxlRGF0YS5kZXNjcmlwdGlvbjtcclxuICAgICAgdXNlckluZm8uc2V0VXNlckluZm8oeyBuYW1lLCBkZXNjcmlwdGlvbiB9KTtcclxuICAgICAgZWRpdFByb2ZpbGVQb3B1cC5jbG9zZSgpO1xyXG4gICAgfSlcclxuICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcclxuICAgICAgYWxlcnQoYCR7ZXJyfSwgQ291bGQgbm90IHVwZGF0ZSB1c2VyIGluZm8hYCk7XHJcbiAgICB9KVxyXG4gICAgLmZpbmFsbHkoKCkgPT4ge1xyXG4gICAgICBlZGl0UHJvZmlsZVBvcHVwLnJlbmRlckxvYWRpbmcoZmFsc2UpO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZUFkZENhcmRTdWJtaXQoaW5wdXRWYWx1ZXMpIHtcclxuICBuZXdDYXJkUG9wdXAucmVuZGVyTG9hZGluZyh0cnVlKTtcclxuICBhcGlcclxuICAgIC5hZGRDYXJkKHsgbmFtZTogaW5wdXRWYWx1ZXMudGl0bGUsIGxpbms6IGlucHV0VmFsdWVzLnVybCB9KVxyXG4gICAgLnRoZW4oKG5ld0NhcmREYXRhKSA9PiB7XHJcbiAgICAgIGNhcmRTZWN0aW9uLmFkZEl0ZW0oY3JlYXRlQ2FyZChuZXdDYXJkRGF0YSkpO1xyXG4gICAgICBhZGRDYXJkRm9ybS5yZXNldCgpO1xyXG4gICAgICBuZXdDYXJkUG9wdXAuY2xvc2UoKTtcclxuICAgICAgYWRkQ2FyZEZvcm1WYWxpZGF0b3IucmVzZXRGb3JtKCk7XHJcbiAgICB9KVxyXG4gICAgLmNhdGNoKGNvbnNvbGUuZXJyb3IpXHJcbiAgICAuZmluYWxseSgoKSA9PiB7XHJcbiAgICAgIG5ld0NhcmRQb3B1cC5yZW5kZXJMb2FkaW5nKGZhbHNlKTtcclxuICAgIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVOZXdBdmF0YXJTdWJtaXQoZGF0YSkge1xyXG4gIGVkaXRBdmF0YXJQb3B1cC5yZW5kZXJMb2FkaW5nKHRydWUpO1xyXG4gIGFwaVxyXG4gICAgLnVwZGF0ZVByb2ZpbGVBdmF0YXIoZGF0YS51cmwpXHJcbiAgICAudGhlbigocmVzKSA9PiB7XHJcbiAgICAgIHVzZXJJbmZvLnNldFVzZXJBdmF0YXIocmVzKTtcclxuICAgICAgZWRpdEF2YXRhclBvcHVwLmNsb3NlKCk7XHJcbiAgICB9KVxyXG4gICAgLmNhdGNoKGNvbnNvbGUuZXJyb3IpXHJcbiAgICAuZmluYWxseSgoKSA9PiB7XHJcbiAgICAgIGVkaXRBdmF0YXJQb3B1cC5yZW5kZXJMb2FkaW5nKGZhbHNlKTtcclxuICAgIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVEZWxldGVDYXJkKGNhcmRJZCwgY2FyZCkge1xyXG4gIGRlbGV0ZUNhcmRQb3B1cC5vcGVuKCk7XHJcbiAgZGVsZXRlQ2FyZFBvcHVwLmhhbmRsZURlbGV0ZUNvbmZpcm0oKCkgPT4ge1xyXG4gICAgZGVsZXRlQ2FyZFBvcHVwLnJlbmRlckxvYWRpbmcodHJ1ZSk7XHJcbiAgICBhcGlcclxuICAgICAgLmRlbGV0ZUNhcmQoY2FyZElkKVxyXG4gICAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgICAgaGFuZGxlRGVsZXRlQ2FyZCgpO1xyXG4gICAgICAgIGNhcmQuX2hhbmRsZURlbGV0ZUNhcmQoKTtcclxuICAgICAgICBkZWxldGVDYXJkUG9wdXAuY2xvc2UoKTtcclxuICAgICAgfSlcclxuICAgICAgLmNhdGNoKGNvbnNvbGUuZXJyb3IpXHJcbiAgICAgIC5maW5hbGx5KCgpID0+IHtcclxuICAgICAgICBkZWxldGVDYXJkUG9wdXAucmVuZGVyTG9hZGluZyhmYWxzZSk7XHJcbiAgICAgIH0pO1xyXG4gIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVMaWtlQ2FyZChjYXJkSWQsIGNhcmRFbGVtZW50KSB7XHJcbiAgaWYgKGNhcmRFbGVtZW50LmdldElzTGlrZWRTdGF0ZSgpKSB7XHJcbiAgICBhcGlcclxuICAgICAgLnVubGlrZUNhcmQoY2FyZElkKVxyXG4gICAgICAudGhlbigodXBkYXRlZENhcmREYXRhKSA9PiB7XHJcbiAgICAgICAgY2FyZEVsZW1lbnQuZmxpcExpa2VTdGF0ZSgpO1xyXG4gICAgICAgIGNhcmRFbGVtZW50LnVwZGF0ZUxpa2VzKHVwZGF0ZWRDYXJkRGF0YS5pc0xpa2VkKTtcclxuICAgICAgfSlcclxuICAgICAgLmNhdGNoKGNvbnNvbGUuZXJyb3IpO1xyXG4gIH0gZWxzZSB7XHJcbiAgICBhcGlcclxuICAgICAgLmxpa2VDYXJkKGNhcmRJZClcclxuICAgICAgLnRoZW4oKHVwZGF0ZWRDYXJkRGF0YSkgPT4ge1xyXG4gICAgICAgIGNhcmRFbGVtZW50LmZsaXBMaWtlU3RhdGUoKTtcclxuICAgICAgICBjYXJkRWxlbWVudC51cGRhdGVMaWtlcyh1cGRhdGVkQ2FyZERhdGEuaXNMaWtlZCk7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5jYXRjaChjb25zb2xlLmVycm9yKTtcclxuICB9XHJcbn1cclxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxuLyogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRXZlbnQgTGlzdGVuZXJzICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cclxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxuLy9FZGl0IFByb2ZpbGUgRm9ybVxyXG5wcm9maWxlRWRpdEJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIGNvbnN0IHVzZXJJbnB1dCA9IHVzZXJJbmZvLmdldFVzZXJJbmZvKCk7XHJcbiAgcHJvZmlsZVRpdGxlSW5wdXQudmFsdWUgPSB1c2VySW5wdXQubmFtZTtcclxuICBwcm9maWxlRGVzY3JpcHRpb25JbnB1dC52YWx1ZSA9IHVzZXJJbnB1dC5kZXNjcmlwdGlvbjtcclxuICBlZGl0UHJvZmlsZVBvcHVwLm9wZW4oKTtcclxufSk7XHJcblxyXG4vL0VkaXQgQXZhdGFyIEZvcm1cclxuZWRpdEF2YXRhckJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIGVkaXRBdmF0YXJQb3B1cC5vcGVuKCk7XHJcbiAgZWRpdEF2YXRhckZvcm1WYWxpZGF0b3IucmVzZXRGb3JtKCk7XHJcbn0pO1xyXG5cclxuLy9OZXcgQ2FyZCBGb3JtXHJcbmFkZENhcmRCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICBuZXdDYXJkUG9wdXAub3BlbigpO1xyXG4gIGFkZENhcmRGb3JtVmFsaWRhdG9yLnRvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbn0pO1xyXG5cclxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cclxuLyogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVmFsaWRhdGlvbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICovXHJcbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXHJcbmNvbnN0IGFkZENhcmRGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3Iob3B0aW9ucywgYWRkQ2FyZEZvcm0pO1xyXG5hZGRDYXJkRm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcblxyXG5jb25zdCBwcm9maWxlRWRpdEZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihvcHRpb25zLCBwcm9maWxlRWRpdEZvcm0pO1xyXG5wcm9maWxlRWRpdEZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG5cclxuY29uc3QgZWRpdEF2YXRhckZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihvcHRpb25zLCBlZGl0QXZhdGFyRm9ybSk7XHJcbmVkaXRBdmF0YXJGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQXBpIHtcclxuICBjb25zdHJ1Y3Rvcih7IGJhc2VVcmwsIGhlYWRlcnMgfSkge1xyXG4gICAgdGhpcy5fYmFzZVVybCA9IGJhc2VVcmw7XHJcbiAgICB0aGlzLl9oZWFkZXJzID0gaGVhZGVycztcclxuICB9XHJcblxyXG4gIF9oYW5kbGVSZXNwb25zZShyZXMpIHtcclxuICAgIGlmIChyZXMub2spIHtcclxuICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yICR7cmVzLnN0YXR1c31gKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIF9yZXF1ZXN0KHVybCwgb3B0aW9ucykge1xyXG4gICAgcmV0dXJuIGZldGNoKHVybCwgb3B0aW9ucykudGhlbih0aGlzLl9oYW5kbGVSZXNwb25zZSk7XHJcbiAgfVxyXG5cclxuICBnZXRVc2VySW5mbygpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZWAsIHtcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgIH0pLnRoZW4odGhpcy5faGFuZGxlUmVzcG9uc2UpO1xyXG4gIH1cclxuXHJcbiAgZ2V0SW5pdGlhbENhcmRzKCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzYCwge1xyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgfSkudGhlbih0aGlzLl9oYW5kbGVSZXNwb25zZSk7XHJcbiAgfVxyXG5cclxuICB1cGRhdGVQcm9maWxlSW5mbyh7IG5hbWUsIGRlc2NyaXB0aW9uIH0pIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZWAsIHtcclxuICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICBuYW1lLFxyXG4gICAgICAgIGFib3V0OiBkZXNjcmlwdGlvbixcclxuICAgICAgfSksXHJcbiAgICB9KS50aGVuKHRoaXMuX2hhbmRsZVJlc3BvbnNlKTtcclxuICB9XHJcblxyXG4gIGFkZENhcmQoeyBuYW1lLCBsaW5rIH0pIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkc2AsIHtcclxuICAgICAgbWV0aG9kOiBcIlBPU1RcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgIG5hbWUsXHJcbiAgICAgICAgbGluayxcclxuICAgICAgfSksXHJcbiAgICB9KS50aGVuKHRoaXMuX2hhbmRsZVJlc3BvbnNlKTtcclxuICB9XHJcblxyXG4gIGRlbGV0ZUNhcmQoY2FyZElkKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHMvJHtjYXJkSWR9YCwge1xyXG4gICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICB9KS50aGVuKHRoaXMuX2hhbmRsZVJlc3BvbnNlKTtcclxuICB9XHJcblxyXG4gIGxpa2VDYXJkKGNhcmRJZCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzLyR7Y2FyZElkfS9saWtlc2AsIHtcclxuICAgICAgbWV0aG9kOiBcIlBVVFwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgfSkudGhlbih0aGlzLl9oYW5kbGVSZXNwb25zZSk7XHJcbiAgfVxyXG5cclxuICB1bmxpa2VDYXJkKGNhcmRJZCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzLyR7Y2FyZElkfS9saWtlc2AsIHtcclxuICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgfSkudGhlbih0aGlzLl9oYW5kbGVSZXNwb25zZSk7XHJcbiAgfVxyXG5cclxuICB1cGRhdGVQcm9maWxlQXZhdGFyKHVybCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lL2F2YXRhcmAsIHtcclxuICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICBhdmF0YXI6IHVybCxcclxuICAgICAgfSksXHJcbiAgICB9KS50aGVuKHRoaXMuX2hhbmRsZVJlc3BvbnNlKTtcclxuICB9XHJcblxyXG4gIGdldEFwcERhdGEoKSB7XHJcbiAgICByZXR1cm4gUHJvbWlzZS5hbGwoW3RoaXMuZ2V0VXNlckluZm8oKSwgdGhpcy5nZXRJbml0aWFsQ2FyZHMoKV0pO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXBcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwRGVsZXRlQ2FyZCBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcih7IHBvcHVwU2VsZWN0b3IgfSkge1xyXG4gICAgc3VwZXIoeyBwb3B1cFNlbGVjdG9yIH0pO1xyXG4gICAgdGhpcy5fcG9wdXBGb3JtID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Zvcm1cIik7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fc2F2ZVwiKTtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblRleHQgPSB0aGlzLl9zdWJtaXRCdXR0b24udGV4dENvbnRlbnQ7XHJcbiAgfVxyXG5cclxuICBoYW5kbGVEZWxldGVDb25maXJtKGNhbGxiYWNrKSB7XHJcbiAgICB0aGlzLl9oYW5kbGVEZWxldGVDb25maXJtID0gY2FsbGJhY2s7XHJcbiAgfVxyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICB0aGlzLl9wb3B1cEZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZSkgPT4ge1xyXG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIHRoaXMuX2hhbmRsZURlbGV0ZUNvbmZpcm0oKTtcclxuICAgIH0pO1xyXG4gIH1cclxuICByZW5kZXJMb2FkaW5nKGlzTG9hZGluZywgbG9hZGluZ1RleHQgPSBcIkRlbGV0aW5nLi4uXCIpIHtcclxuICAgIGlmIChpc0xvYWRpbmcpIHtcclxuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLnRleHRDb250ZW50ID0gbG9hZGluZ1RleHQ7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24udGV4dENvbnRlbnQgPSB0aGlzLl9zdWJtaXRCdXR0b25UZXh0O1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcclxuICAgIHN1cGVyKHsgcG9wdXBTZWxlY3RvciB9KTtcclxuICAgIHRoaXMuX3ByZXZpZXdJbWFnZSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiI3ByZXZpZXctaW1hZ2VcIik7XHJcbiAgICB0aGlzLl9wcmV2aWV3SW1hZ2VUaXRsZSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBcIiNwcmV2aWV3LWltYWdlLXRpdGxlXCJcclxuICAgICk7XHJcbiAgfVxyXG5cclxuICBvcGVuKHsgbmFtZSwgbGluayB9KSB7XHJcbiAgICB0aGlzLl9wcmV2aWV3SW1hZ2Uuc3JjID0gbGluaztcclxuICAgIHRoaXMuX3ByZXZpZXdJbWFnZS5hbHQgPSBuYW1lO1xyXG4gICAgdGhpcy5fcHJldmlld0ltYWdlVGl0bGUudGV4dENvbnRlbnQgPSBuYW1lO1xyXG4gICAgc3VwZXIub3BlbigpO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XHJcbiAgY29uc3RydWN0b3IoeyBuYW1lLCBkZXNjcmlwdGlvbiwgYXZhdGFyIH0pIHtcclxuICAgIHRoaXMuX25hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKG5hbWUpO1xyXG4gICAgdGhpcy5fZGVzY3JpcHRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGRlc2NyaXB0aW9uKTtcclxuICAgIHRoaXMuX2F2YXRhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYXZhdGFyKTtcclxuICB9XHJcblxyXG4gIGdldFVzZXJJbmZvKCkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgbmFtZTogdGhpcy5fbmFtZS50ZXh0Q29udGVudCxcclxuICAgICAgZGVzY3JpcHRpb246IHRoaXMuX2Rlc2NyaXB0aW9uLnRleHRDb250ZW50LFxyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIHNldFVzZXJJbmZvKHsgbmFtZSwgZGVzY3JpcHRpb24gfSkge1xyXG4gICAgdGhpcy5fbmFtZS50ZXh0Q29udGVudCA9IG5hbWU7XHJcbiAgICB0aGlzLl9kZXNjcmlwdGlvbi50ZXh0Q29udGVudCA9IGRlc2NyaXB0aW9uO1xyXG4gIH1cclxuXHJcbiAgc2V0VXNlckF2YXRhcih7IGF2YXRhciB9KSB7XHJcbiAgICB0aGlzLl9hdmF0YXIuc3JjID0gYXZhdGFyO1xyXG4gIH1cclxufVxyXG4iXSwibmFtZXMiOlsib3B0aW9ucyIsImZvcm1TZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwiQ2FyZCIsImNvbnN0cnVjdG9yIiwiZGF0YSIsImNhcmRTZWxlY3RvciIsImhhbmRsZUltYWdlQ2xpY2siLCJoYW5kbGVEZWxldGVDbGljayIsImhhbmRsZUxpa2VDbGljayIsInRoaXMiLCJuYW1lIiwibGluayIsIl9pZCIsIl9pc0xpa2VkIiwiaXNMaWtlZCIsIl91c2VySWQiLCJfY2FyZFNlbGVjdG9yIiwiX2hhbmRsZUltYWdlQ2xpY2siLCJfaGFuZGxlRGVsZXRlQ2xpY2siLCJfaGFuZGxlTGlrZUNsaWNrIiwiX3ByZXZpZXdJbWFnZUVsZW1lbnQiLCJfZ2V0VGVtcGxhdGUiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiX2xpa2VCdXR0b24iLCJfY2FyZEVsZW1lbnQiLCJhZGRFdmVudExpc3RlbmVyIiwiX2RlbGV0ZUJ1dHRvbiIsIl9jYXJkSW1hZ2VFbGVtZW50IiwiX2hhbmRsZURlbGV0ZUNhcmQiLCJyZW1vdmUiLCJnZXRJc0xpa2VkU3RhdGUiLCJ1cGRhdGVMaWtlcyIsImNsYXNzTGlzdCIsImFkZCIsImZsaXBMaWtlU3RhdGUiLCJnZXRWaWV3IiwiX2NhcmRUaXRsZUVsZW1lbnQiLCJzcmMiLCJhbHQiLCJ0ZXh0Q29udGVudCIsIkZvcm1WYWxpZGF0b3IiLCJmb3JtRWxlbWVudCIsIl9mb3JtRWxlbWVudCIsIl9mb3JtU2VsZWN0b3IiLCJfaW5wdXRTZWxlY3RvciIsIl9zdWJtaXRCdXR0b25TZWxlY3RvciIsIl9pbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiX2lucHV0RXJyb3JDbGFzcyIsIl9lcnJvckNsYXNzIiwiX3Nob3dJbnB1dEVycm9yIiwiaW5wdXRFbGVtZW50IiwiX2Vycm9yTWVzc2FnZSIsImlkIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJfaGlkZUlucHV0RXJyb3IiLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9oYXNJbnZhbGlkSW5wdXQiLCJfaW5wdXRFbGVtZW50cyIsImV2ZXJ5IiwidG9nZ2xlQnV0dG9uU3RhdGUiLCJfZGlzYWJsZVN1Ym1pdEJ1dHRvbiIsIl9lbmFibGVTdWJtaXRCdXR0b24iLCJfc3VibWl0QnV0dG9uIiwiZGlzYWJsZWQiLCJxdWVyeVNlbGVjdG9yQWxsIiwiZm9yRWFjaCIsImUiLCJyZXNldEZvcm0iLCJlbmFibGVWYWxpZGF0aW9uIiwicHJldmVudERlZmF1bHQiLCJQb3B1cCIsIl9yZWYiLCJwb3B1cFNlbGVjdG9yIiwiX3BvcHVwU2VsZWN0b3IiLCJfcG9wdXBFbGVtZW50Iiwib3BlbiIsIl9oYW5kbGVFc2NDbG9zZSIsImNsb3NlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImtleSIsInNldEV2ZW50TGlzdGVuZXJzIiwidGFyZ2V0IiwiY29udGFpbnMiLCJQb3B1cFdpdGhGb3JtIiwiaGFuZGxlRm9ybVN1Ym1pdCIsInN1cGVyIiwiX3BvcHVwRm9ybSIsIl9oYW5kbGVGb3JtU3VibWl0IiwiX2lucHV0TGlzdCIsIl9zdWJtaXRCdXR0b25UZXh0IiwicmVuZGVyTG9hZGluZyIsImlzTG9hZGluZyIsImxvYWRpbmdUZXh0IiwiYXJndW1lbnRzIiwibGVuZ3RoIiwidW5kZWZpbmVkIiwiX2dldElucHV0VmFsdWVzIiwiZm9ybVZhbHVlcyIsInZhbHVlIiwicmVzZXQiLCJTZWN0aW9uIiwiY2xhc3NTZWxlY3RvciIsIml0ZW1zIiwicmVuZGVyZXIiLCJfaXRlbSIsIl9yZW5kZXJlciIsIl9jbGFzc1NlY3Rpb24iLCJyZW5kZXJJdGVtcyIsIml0ZW0iLCJhZGRJdGVtIiwiZWxlbWVudCIsInByZXBlbmQiLCJzZXRJdGVtcyIsIl9pdGVtcyIsImNhcmRMaXN0RWxlbWVudCIsInByb2ZpbGVFZGl0Rm9ybSIsInByb2ZpbGVFZGl0QnRuIiwicHJvZmlsZVRpdGxlSW5wdXQiLCJwcm9maWxlRGVzY3JpcHRpb25JbnB1dCIsImVkaXRBdmF0YXJGb3JtIiwiZWRpdEF2YXRhckJ1dHRvbiIsImFkZENhcmRGb3JtIiwiYWRkQ2FyZEJ0biIsImFwaSIsImJhc2VVcmwiLCJoZWFkZXJzIiwiX2Jhc2VVcmwiLCJfaGVhZGVycyIsIl9oYW5kbGVSZXNwb25zZSIsInJlcyIsIm9rIiwianNvbiIsIlByb21pc2UiLCJyZWplY3QiLCJzdGF0dXMiLCJfcmVxdWVzdCIsInVybCIsImZldGNoIiwidGhlbiIsImdldFVzZXJJbmZvIiwiZ2V0SW5pdGlhbENhcmRzIiwidXBkYXRlUHJvZmlsZUluZm8iLCJfcmVmMiIsImRlc2NyaXB0aW9uIiwibWV0aG9kIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJhYm91dCIsImFkZENhcmQiLCJfcmVmMyIsImRlbGV0ZUNhcmQiLCJjYXJkSWQiLCJsaWtlQ2FyZCIsInVubGlrZUNhcmQiLCJ1cGRhdGVQcm9maWxlQXZhdGFyIiwiYXZhdGFyIiwiZ2V0QXBwRGF0YSIsImFsbCIsImF1dGhvcml6YXRpb24iLCJlZGl0UHJvZmlsZVBvcHVwIiwicHJvZmlsZURhdGEiLCJ1c2VySW5mbyIsInNldFVzZXJJbmZvIiwiY2F0Y2giLCJlcnIiLCJjb25zb2xlIiwiZXJyb3IiLCJhbGVydCIsImZpbmFsbHkiLCJlZGl0QXZhdGFyUG9wdXAiLCJzZXRVc2VyQXZhdGFyIiwidXNlcklkIiwibmV3Q2FyZFBvcHVwIiwiaW5wdXRWYWx1ZXMiLCJ0aXRsZSIsIm5ld0NhcmREYXRhIiwiY2FyZFNlY3Rpb24iLCJjcmVhdGVDYXJkIiwiYWRkQ2FyZEZvcm1WYWxpZGF0b3IiLCJkZWxldGVDYXJkUG9wdXAiLCJoYW5kbGVEZWxldGVDb25maXJtIiwiY2FsbGJhY2siLCJfaGFuZGxlRGVsZXRlQ29uZmlybSIsInByZXZpZXdJbWFnZVBvcHVwIiwiX3ByZXZpZXdJbWFnZSIsIl9wcmV2aWV3SW1hZ2VUaXRsZSIsInVzZXJEYXRhIiwiaW5pdGlhbENhcmRzIiwiX25hbWUiLCJfZGVzY3JpcHRpb24iLCJfYXZhdGFyIiwiaGFuZGxlRGVsZXRlQ2FyZCIsImhhbmRsZUxpa2VDYXJkIiwiY2FyZCIsImNhcmRFbGVtZW50IiwidXBkYXRlZENhcmREYXRhIiwidXNlcklucHV0IiwiZWRpdEF2YXRhckZvcm1WYWxpZGF0b3IiXSwic291cmNlUm9vdCI6IiJ9